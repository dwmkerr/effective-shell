<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-core-skills/thinking-in-pipelines/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Thinking in Pipelines | Effective Shell</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://effective-shell.com/part-2-core-skills/thinking-in-pipelines/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="google-site-verification" content="ca-pub-6181461532532600"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Thinking in Pipelines | Effective Shell"><meta data-rh="true" name="description" content="Understanding the concept of pipelines in the shell, as well as how input and output work for command line programs is critical to be able to use the shell effectively."><meta data-rh="true" property="og:description" content="Understanding the concept of pipelines in the shell, as well as how input and output work for command line programs is critical to be able to use the shell effectively."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://effective-shell.com/part-2-core-skills/thinking-in-pipelines/"><link data-rh="true" rel="alternate" href="https://effective-shell.com/part-2-core-skills/thinking-in-pipelines/" hreflang="en"><link data-rh="true" rel="alternate" href="https://effective-shell.com/part-2-core-skills/thinking-in-pipelines/" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HZFMZV9Z4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-8HZFMZV9Z4",{anonymize_ip:!0})</script>


<script src="https://cdn.jsdelivr.net/npm/docusaurus-plugin-drawio/viewer.min.js"></script>


<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6181461532532600" async></script>
<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6181461532532600" async></script><link rel="stylesheet" href="/assets/css/styles.51892cac.css">
<link rel="preload" href="/assets/js/runtime~main.00eb20ad.js" as="script">
<link rel="preload" href="/assets/js/main.6c7311e1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Effective Shell Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Effective Shell Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Effective Shell</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="navbar__item navbar__link" href="/donate">Donate</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div><a href="https://github.com/dwmkerr/effective-shell/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-1-transitioning-to-the-shell/">Transitioning to the Shell</a><button aria-label="Toggle the collapsible sidebar category &#x27;Transitioning to the Shell&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/part-2-core-skill/">Core Skills</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core Skills&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/part-2-core-skills/thinking-in-pipelines/">Thinking in Pipelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-2-core-skills/fly-on-the-command-line">Fly on the Command Line</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-2-core-skills/job-control">Job Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-2-core-skills/understanding-commands">Understanding Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-2-core-skills/finding-files">Finding Files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-2-core-skills/what-is-a-shell">What is a Shell?</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-3-manipulating-text/">Manipulating Text and Streams</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manipulating Text and Streams&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-4-shell-scripting/">Shell Scripting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Shell Scripting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-5-building-your-toolkit/">Building Your Toolkit</a><button aria-label="Toggle the collapsible sidebar category &#x27;Building Your Toolkit&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-6-advanced-techniques/">Advanced Techniques</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced Techniques&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/xx-appendices/installing-samples/">Appendices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zz-developer-guide/components">Developer Guide</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Thinking in Pipelines</h1></header><p>Understanding the concept of <em>pipelines</em> in the shell, as well as how input and output work for command line programs is critical to be able to use the shell effectively.</p><p>In this chapter, we&#x27;ll look at the ways programs handle input and output, then we&#x27;ll look at how we can chain multiple commands together with pipelines. We&#x27;ll also look at some really common ways to use pipelines which should hopefully make your life easier!</p><p>When you understand these concepts, it will open up a new world in terms of what you can do with in the shell. We&#x27;ll briefly touch on the &#x27;The Unix Philosophy&#x27;, which is a concept which allows us to perform highly complex tasks by composing together small, simple components.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="input-and-output">Input and Output<a class="hash-link" href="#input-and-output" title="Direct link to heading">​</a></h2><p>Many of the programs we have seen so far follow a very similar pattern:</p><img loading="lazy" src="/assets/images/diagram-input-program-output-fb71da951178e72bf4504bd292743d1c.png" alt="Diagram: Input -&gt; Program -&gt; Output" width="480px" class="img_ev3q"><p>In fact, when you get down to the details, there are very few programs which <em>don&#x27;t</em> do something like this! As a more concrete example, we can look at the <code>sort</code> program - which sorts the input in alphabetic order:</p><img loading="lazy" src="/assets/images/diagram-sort-040db6e92c70e60612c9f711e81c9612.png" alt="Diagram: Sort" width="480px" class="img_ev3q"><p>We can easily see this in action by just running <code>sort</code> in a shell. Start the <code>sort</code> program, enter some text, then press <code>Ctrl+D</code>. <code>Ctrl+D</code> (which is normally written as <code>^D</code> is a special <em>control character</em> which means &#x27;end of transmission&#x27; - in this case we use it to tell <code>sort</code> we&#x27;ve finished writing text. If you were to use <code>^C</code> (which is the <em>interrupt</em> command) it would closes the <code>sort</code> program instead).</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ sort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dogs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cats</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cats</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mice</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you&#x27;ve entered the text you want to sort, hit <code>^D</code> and you&#x27;ll see the sorted output:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Dogs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cats</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cats</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mice</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So by default, the <code>sort</code> command is reading <em>input</em> from the keyboard (until we send it a special message saying we&#x27;re done), then writing the <em>output</em> to the terminal.</p><p>In fact, <code>sort</code> is using two special <em>files</em> - <code>stdin</code> and <code>stdout</code> - but what does this mean?</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="standard-input-output-and-error">Standard Input, Output and Error<a class="hash-link" href="#standard-input-output-and-error" title="Direct link to heading">​</a></h2><p>Every program has access to three &#x27;special&#x27; files, <code>stdin</code>, <code>stdout</code> and <code>stderr</code>:</p><img loading="lazy" src="/assets/images/diagram-stdin-stdout-stderr-702e578630d8d39c813d7d88c270c339.png" alt="Diagram: stdin, stdout, stderr" width="480px" class="img_ev3q"><ul><li><code>stdin</code> is short for &#x27;standard input&#x27; - it&#x27;s where <em>many</em> programs read their input from</li><li><code>stdout</code> is short for &#x27;standard output&#x27; - it&#x27;s where <em>many</em> programs write their output to</li><li><code>stderr</code> is short for &#x27;standard error&#x27; -  it&#x27;s where <em>some</em> programs write error messages to</li></ul><p>Why do I say &#x27;many&#x27; and &#x27;some&#x27;? Well the reason is that while this is <em>convention</em>, it is not adhered to universally. Anyone who writes a program is free to choose how they read input and write output, so some programs might not follow these conventions. In Chapter 29 we&#x27;ll look at how to write tools which follow these conventions, as well as others which are useful.</p><p>Each of these files has a special number which is shown in grey in the diagram. This is known as the <em>file descriptor</em> and we&#x27;ll see it later on. Each of these files also has a special location in the system which you can access directly - you can see these files by running <code>ls -al /dev/std*</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ls -al /dev/std*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lr-xr-xr-x 1 root wheel 0 Jan  1  1970 /dev/stderr -&gt; fd/2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lr-xr-xr-x 1 root wheel 0 Jan  1  1970 /dev/stdin -&gt; fd/0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lr-xr-xr-x 1 root wheel 0 Jan  1  1970 /dev/stdout -&gt; fd/1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you are not familiar with <code>ls</code> (the <em>list directory contents</em> command) then check <a href="/part-1-transitioning-to-the-shell/navigating-your-system/">Chapter 2 - Navigating Your System</a>. The first part of the output isn&#x27;t too important - but we can see we have three files in the special <code>/dev/</code> (short for <em>device</em> folder). We can also see the associated file descriptors.</p><p>As an aside - this is a really fundamental thing we&#x27;ll see again and again in Unix and Linux - almost everything can be represented as a file. This is a core concept and one we&#x27;ll touch on regularly.</p><p>When you are running programs in a shell, the shell attaches your keyboard to the program&#x27;s standard input<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>, and attaches the standard output and standard error to the terminal display:</p><img loading="lazy" src="/assets/images/diagram-shell-keyboard-terminal-0475940cdf40bbcc8a329c090aa9e76a.png" alt="Diagram: Shell, Keyboard, Terminal" width="640px" class="img_ev3q"><p>This means when we&#x27;re in a shell, we can type on the keyboard, which goes to the input of the program and then as the program outputs information and errors they show up on the screen.</p><p>We can already see the beginnings of a <strong>pipeline</strong> here. There&#x27;s a clear flow of data from the keyboard, through the <code>stdin</code> file, through the program, then through the output files, then to the display.</p><p>Looking at some real programs in action will hopefully make this clearer!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-pipeline-in-action">A Pipeline in Action<a class="hash-link" href="#a-pipeline-in-action" title="Direct link to heading">​</a></h2><p>Do you remember the <code>cat</code> command? It&#x27;s the one which writes the contents of a file to the screen. For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat ~/effective-shell/text/simpsons-characters.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Artie Ziff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kirk Van Houten</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Timothy Lovejoy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Artie Ziff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nick Riviera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Seymore Skinner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hank Scorpio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Timothy Lovejoy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">John Frink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cletus Spuckler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ruth Powers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Artie Ziff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Agnes Skinner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Helen Lovejoy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We saw in <a href="/part-1-transitioning-to-the-shell/become-a-clipboard-gymnast/">Chapter 4 - Becoming a Clipboard Gymnast</a> that we could <strong>pipe</strong> the output of this command into the <code>sort</code> command to order it and then into the <code>uniq</code> command to remove duplicates, like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat ~/effective-shell/text/simpsons-characters.txt | sort | uniq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Agnes Skinner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Artie Ziff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cletus Spuckler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hank Scorpio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Helen Lovejoy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">John Frink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kirk Van Houten</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Nick Riviera</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ruth Powers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Seymore Skinner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Timothy Lovejoy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <strong>pipe</strong> operator (which is the vertical pipe symbol or <code>|</code>) has a very specific meaning in the shell - it attaches the <code>stdout</code> of the first program to the <code>stdin</code> of the second. This means we can now visualise the entire pipeline and see exactly what is going on:</p><img loading="lazy" src="/assets/images/diagram-cat-sort-uniq-pipeline-8c8d76566f351b4b9b900dde52af86b3.png" alt="Diagram: cat-sort-uniq pipeline" width="1024px" class="img_ev3q"><p>That&#x27;s it! If you can follow what is going on here then you have the key information you need to know to understand how pipelines work. The pipe operator just connects the output of one program to the input of another. A pipeline is just a set of connected programs. Easy!</p><p>We could do the same thing by writing the output of each step as a file, then reading that file with the next step, but that would mean we&#x27;d have a lot of intermediate files to clean up (and if we&#x27;re processing a <em>big</em> file, it also uses a lot of space). Pipelines let us create complex sequences of operations which work well even on very large files.</p><p>Now we&#x27;ll look at <code>stdin</code>, <code>stdout</code> and <code>stderr</code> in a little more detail. We&#x27;ll be seeing these special streams a lot as we go through the book. Knowing more about them is really going to help you when working in the shell or with Linux-like systems.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-patterns---standard-input">Common Patterns - Standard Input<a class="hash-link" href="#common-patterns---standard-input" title="Direct link to heading">​</a></h2><p>Let&#x27;s have a quick look at some of the common things we might see as sources of inputs for other programs. Each one illustrates an interesting point about how the shell or the standard input stream works.</p><img loading="lazy" src="/assets/images/diagram-input-examples-e014dd4998bee0b50a94849ad55b01ce.png" alt="Diagram: Input Examples" width="1024px" class="img_ev3q"><p>This list is by no means exhaustive, in fact with a bit of tinkering you can make almost anything the input to anything else, but let&#x27;s check each example.</p><p>These examples will use some new programs to transform the output - don&#x27;t worry about the details of them, each will be described as we go through the book!</p><p><strong>The Shell</strong></p><p>You might just use code in the shell as input, for example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;I am in the $PWD folder&quot; | sed &#x27;s/folder/directory/&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I am in the /Users/dwmkerr/repos/github/dwmkerr/effective-shell directory</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we&#x27;ve just used <code>echo</code> to write out message including a variable and then used the <code>sed</code> (<em>stream editor</em>) program to replace the word <code>folder</code> with <code>directory</code>. We&#x27;ll get a lot of practice with <code>sed</code> as we go through this book!</p><p><strong>Files</strong></p><p>We&#x27;ve already seen a few examples of using <code>cat</code> to write a file to <code>stdout</code>.</p><p>A lot of the time we don&#x27;t need to use <code>cat</code> many programs accept the path of a file as a parameter, meaning we can just tell the program to open the file directly. For example, we could count the number of lines in a file like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat ~/effective-shell/text/simpsons-characters.txt | wc -l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      14</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or more simply, like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wc -l ~/effective-shell/text/simpsons-characters.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      14 /Users/dwmkerr/effective-shell/text/simpsons-characters.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this case, we&#x27;ve passed the file path as an argument to the <code>wc</code> (<em>word, line, character and byte count</em>) program. But be aware - not all programs use the same convention or parameter names!</p><p>Now here&#x27;s a cool trick. Type <code>rev &lt; /dev/stdin</code>, then enter some text and hit <code>^D</code> or <code>^C</code> when done. You should see something like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ rev &lt; /dev/stdin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Red Rum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">muR deR</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>What&#x27;s going on here?  Remember we mentioned that <code>stdin</code> is a special stream which represents input and that it lives at <code>/dev/stdin</code>? This little trick uses <em>redirection</em> to redirect the <code>stdin</code> file to the <code>rev</code> (<em>reverse</em>) command.</p><p>The <code>&lt;</code> operator redirects the standard input of a program to come from the given file. We could also have written <code>cat /dev/stdin | rev</code>. Or just enter <code>rev</code> and type in the input we want to reverse!</p><p><strong>The Clipboard</strong></p><p>In <a href="/part-1-transitioning-to-the-shell/become-a-clipboard-gymnast/">Chapter 4 - Becoming a Clipboard Gymnast</a> we saw a trick to remove formatting from text in the clipboard. Here&#x27;s a similar trick to reverse the contents of the clipboard:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ pbpaste | rev | pbcopy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This pipeline pastes the contents of the clipboard to <code>stdout</code>, which is piped to <code>rev</code> (reversing the text) and then pipes the output to <code>pbcopy</code>, which copies the results to the clipboard<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>.</p><p><strong>Filtered Input</strong></p><p>This is a trick a friend shared with me. He works with data scientists and whenever he shows them this command they love it!</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ head -n 100 100GBFile.csv &gt; 100linefile.csv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>head</code> (<em>display first lines of a file</em>) command in this case just grabs the first 100 lines of a file and puts it straight into a smaller, more manageable file. We&#x27;ll see what the <code>&gt;</code> symbol (the <em>redirection</em> symbol) means in the section lower down on Standard Output.</p><p>You can also use <code>tail</code> in the same way to get the <em>last</em> lines from a file. And if you are a more advanced user, you might use something like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ grep -C 5 error /var/log/mylogfile.txt | less</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We&#x27;ll see all of these commands as we go through the book, but this very cool trick uses the <code>grep</code> (<em>file pattern searcher</em>) command to search for the text <code>error</code> in the file <code>/var/log/mylogfile.txt</code>, shows five lines of <em>context</em> (<code>-C 5</code>), which are the lines before and after the match, then puts the result into your pager! We&#x27;ll see the pager just below. We&#x27;ll do a lot of <code>grep</code>-ing as we go through the book so don&#x27;t worry if this looks a little confusing for now.</p><p><strong>Many More!</strong></p><p>We&#x27;ve only scratched the surface - almost any program will write to the standard output, meaning it can be the input for any pipeline you can imagine!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-patterns---standard-output">Common Patterns - Standard Output<a class="hash-link" href="#common-patterns---standard-output" title="Direct link to heading">​</a></h2><p>Now let&#x27;s look at some of the things we can do with the standard output:</p><img loading="lazy" src="/assets/images/diagram-output-examples-27e30c4a4036b2591e10e8c4fca7dc73.png" alt="Diagram: Output Examples" width="1024px" class="img_ev3q"><p>Some of these outputs are things we&#x27;ve seen before, but let&#x27;s do a quick revision.</p><p><strong>Display</strong></p><p>This is what we&#x27;ve been doing a lot of so far.  When you are working with the shell <em>interactively</em> this makes a lot of sense.</p><p>If you have jobs which run in the <em>background</em> (or on a timer, such as backup jobs which run nightly), you might not actually have a terminal attached to the program to see the output, in which case you&#x27;ll likely write to a file.</p><p>What about if you have a <em>lot</em> of output? It can be quite inconvenient to have to scroll through the terminal (or impossible, depending on the system you are on). In this case use a <em>pager</em>. A pager is a program which makes it possible to interactively <em>page</em> through output in the shell, scrolling up and down, searching and so on.</p><p>Try this out as an example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> /usr/bin /usr/local/bin /usr/sbin </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">less</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You&#x27;ll see something like this:</p><img loading="lazy" src="/assets/images/screenshot-less-65730c042d9a734b6f50168219fb70f7.png" alt="Screenshot: Less Example" width="800px" class="img_ev3q"><p>This long list of files would be hard to search through if it was printed directly to the shell, but in the pager we can use the <code>d</code> and <code>u</code> keys to go <em>down</em> and <em>up</em>, or the <code>/</code> and <code>?</code> keys to search forwards or backwards.</p><p>Piping into your pager is a really useful trick - you can read more about pagers in <a href="/part-1-transitioning-to-the-shell/getting-help/">Chapter 5 - Getting Help</a>.</p><p><strong>File</strong></p><p>The shell has a built in operator which will pipe the standard output of a program and write it to a file. It is the <code>&gt;</code> or <em>redirection</em> operator:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;Here&#x27;s some data&quot; &gt; some_file.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It&#x27;s as easy as that! Note that this will <em>overwrite</em> anything already in the file.</p><p><strong>Append</strong></p><p>What if you don&#x27;t want to overwrite a file, but instead just add a new line? The <code>&gt;&gt;</code> or <em>append redirection</em> operator:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;Tuesday was good&quot; &gt;&gt; diary.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;Wednesday was better!&quot; &gt;&gt; diary.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;Thursday suuucks&quot; &gt;&gt; diary.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cat diary.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tuesday was good</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wednesday was better!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Thursday suuucks</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This example writes each line in turn to the <code>diary.txt</code> file, appending the text to the end of the file (and creating it if it doesn&#x27;t already exist).</p><p>Appending to a file is extremely useful for circumstances where you might want to build or update a log of events over time.</p><p><strong>Pipe</strong></p><p>This is what we&#x27;ve spent most of this chapter looking at - to simply pipe the standard output to the standard input of another program!</p><p>In this case, the output of our program becomes the input of the next one in the pipeline.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-patterns---standard-error">Common Patterns - Standard Error<a class="hash-link" href="#common-patterns---standard-error" title="Direct link to heading">​</a></h2><p>We haven&#x27;t actually seen <code>stderr</code> in action yet. Let&#x27;s see how it works.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir ~/effective-shell/new-folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir ~/effective-shell/new-folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir: /home/dwmkerr/effective-shell/new-folder: File exists</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the first call to <code>mkdir</code>, the folder is created successfully. In the second call, we get an error. Now let&#x27;s try and use this output and make it louder - making all of the text uppercase.</p><p>There are lots of ways to make text uppercase in the shell, let&#x27;s use the <code>tr</code> (<em>translate characters</em>) program. Here&#x27;s an example of how it works:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &#x27;Be quiet, this is a library!&#x27; | tr &#x27;[:lower:]&#x27; &#x27;[:upper:]&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BE QUIET, THIS IS A LIBRARY!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now let&#x27;s use it to shout out our error message:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir ~/effective-shell/new-folder | tr &#x27;[:lower:]&#x27; &#x27;[:upper:]&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir: /home/dwmkerr/effective-shell/new-folder: File exists</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this case the output has not been made uppercase. What&#x27;s going on?</p><p>To understand, let&#x27;s quickly review the three streams:</p><img loading="lazy" src="/assets/images/diagram-stdin-stdout-stderr-702e578630d8d39c813d7d88c270c339.png" alt="Diagram: stdin/stdout/stderr" width="1024px" class="img_ev3q"><p>When we are in the shell, the shell automatically writes the <code>stderr</code> stream to the screen. But the shell&#x27;s <em>pipe</em> operator pipes <code>stdout</code> only - it is <em>not</em> piping our error output. And the <code>mkdir</code> command is writing this error message to <code>stderr</code>.</p><p>The command we ran before:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir ~/effective-shell/new-folder | tr &#x27;[:lower:]&#x27; &#x27;[:upper:]&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Actually looks like this:</p><img loading="lazy" src="/assets/images/diagram-stderr-d0845508087975a7d58ebac63e3a8cd5.png" alt="Diagram: Standard Error" width="1024px" class="img_ev3q"><p>The pipe <em>has</em> piped the standard output to the <code>tr</code> program. But there is no standard output - the error message was written to <em>standard error</em> instead. The shell has still written it to the screen for us, but has not piped it to the <code>tr</code> program.</p><p>So how do we deal with <code>stderr</code>? Here are some common options:</p><img loading="lazy" src="/assets/images/diagram-stderr-options-a2cde4aa6177249c25dd9e5c0c62667a.png" alt="Diagram: Standard Error Options" width="1024px" class="img_ev3q"><p>Now this might be the <strong>ah-ha!</strong> moment if you have done some shell scripting before - some of these obscure sequences like <code>2&gt;&amp;1</code> might look familiar (even if it is just the thing you know you always have to Google to get right!).</p><p>Let&#x27;s take a quick look at some of these options.</p><p><strong>To Standard Output</strong></p><p>If we want to be able to pipe the error message to another command, we can use another redirection trick - we can redirect <code>stderr</code> to <code>stdout</code>.</p><p>The characters <code>2&gt;&amp;1</code> look really obscure - let&#x27;s break it down:</p><ul><li>Take the file with descriptor <code>2</code> - which is <em>standard error</em></li><li>Redirect it with the redirect symbol <code>&gt;</code> - we saw this in the earlier section</li><li>Redirect it into the file with descriptor (<code>&amp;</code>) <code>1</code> - which is <em>standard output</em></li></ul><p>Remember, there are three &#x27;magic&#x27; files each process has access to:</p><ul><li><code>stdin</code>, the standard input, which has the file descriptor <code>0</code></li><li><code>stdout</code>, the standard output, which has the file descriptor <code>1</code></li><li><code>stderr</code>, the standard error, which has the file descriptor <code>2</code></li></ul><p>File descriptors are just numbers the operating system uses to keep track of files. When a program opens a &#x27;normal&#x27; file, it&#x27;ll get a new file descriptor. Here&#x27;s a little example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">import os</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">for r in range(3): print(os.open(&#x27;/dev/random&#x27;, os.O_RDONLY))</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This code uses redirection (see how useful it is?) to pipe a small Python script into the Python program, which writes the results to <code>stdout</code>. You will probably see the following output:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It doesn&#x27;t really matter whether you know Python or not (and there weird looking <code>EOF</code> is a <em>heredoc</em> which we have a whole chapter on later). The script is just a way of showing the file descriptors that the operating system gives me when I try to open three files (each time I open the same file, the magic <code>/dev/random</code> file which just contains random data).</p><p>The interesting thing is that the descriptors in my program start from <code>3</code> and go upwards - that&#x27;s because <code>0</code>, <code>1</code> and <code>2</code> are already in use, for <code>stdin</code>, <code>stdout</code> and <code>stderr</code>!</p><p>So to make our error message go through the <code>tr</code> command, we can redirect <code>stderr</code> to <code>stdout</code>, which means the error message will go to <code>stdout</code> and then be piped to <code>tr</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir ~/effective-shell/new-folder 2&gt;&amp;1 | tr &#x27;[:lower:]&#x27; &#x27;[:upper:]&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MKDIR: /HOME/DWMKERR/PLAYGROUND/NEW-FOLDER: FILE EXISTS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Visually, what is happening is this:</p><img loading="lazy" src="/assets/images/diagram-stderr-redirect-c7d8fe2d93a8cdb248924cc13027b59e.png" alt="Diagram: stderr redirect" width="1024px" class="img_ev3q"><p>If you can wrap your head around this, the other options we showed for <code>stderr</code> might start to make a little more sense.</p><p>A nice trick to remember the slightly obscure ampersand <code>&amp;</code> which references a file descriptor - if you were to write this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> some-file-that-might-not-exist </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>What would happen is that the shell would write <code>stderr</code> to a <em>new file</em> with the name <code>1</code>! Why don&#x27;t we need an ampersand <em>before</em> the <code>&gt;</code> symbol, only for the file descriptor afterwards? This is just because the shell only supports redirecting file descriptors, so an additional ampersand would be superfluous.</p><p><strong>To a File</strong></p><p>Before, we redirected to <code>&amp;2</code>, which is &#x27;the file with descriptor <code>2</code>. We can also use a similar trick to redirect to any arbitrary file:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> ~/effective-shell/new-folder </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">./errors.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command just redirects all of the errors (remember, <code>2</code> is <code>stderr</code>) to a file called <code>./errors.txt</code>.</p><p>This is quite a common trick - run the program, but log the errors to a file for later review.</p><p><strong>To Nowhere</strong></p><p>What if we just don&#x27;t want to see the errors at all? Well there&#x27;s a special file called <code>/dev/null</code> which we can use for this. When we write to this file, the operating system just discards the input. In fact, it exists for just this kind of purpose!</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir ~/effective-shell/new-folder 2&gt;/dev/null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This just redirects all errors to the black hole of <code>/dev/null</code> - we won&#x27;t see them on the screen or anywhere else. This is a common way to &#x27;silence&#x27; errors<sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup> in shell commands.</p><p>Notice how we&#x27;re starting to see patterns? This is just redirection, the same tricks we saw for <code>stdout</code>, but we&#x27;re explicitly redirecting <code>stderr</code> (file descriptor <code>2</code>). If we don&#x27;t tell the shell <em>what</em> to redirect, it assumes <code>stdout</code> by default.</p><p>So if we can redirect, can we append too?</p><p><strong>Append</strong></p><p>Yes! Just like we did with <code>stdout</code>, there&#x27;s nothing stopping us <em>appending</em> to a file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir ~/effective-shell/new-folder 2&gt;&gt;./all-errors.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Just like before, we use <code>&gt;&gt;</code> which means <em>append</em> (rather than <em>overwrite or create</em>).</p><p><strong>All to a File</strong></p><p>This is a really important subtlety. If you want to write <em>both</em> <code>stdout</code> and <code>stderr</code> to a file, you might try this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> /usr/bin /nothing </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> all-output.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you run this command, you&#x27;ll get <code>stdout</code> written to <code>all-output.txt</code>, but the error message <code>cannot access  &#x27;/nothing&#x27;</code> is written to the screen, not the file. Why is this?</p><p>Bash (and most bash-like shells) process redirections from <em>left to right</em>, and when we redirect we <em>duplicate</em> the source. So breaking this down:</p><ul><li><code>2&gt;&amp;1</code> - duplicate file descriptor <code>2</code> (<code>stderr</code>) and write it to <code>1</code> - which is <em>currently the terminal</em>!</li><li><code>&gt; all-output.txt</code> - duplicate file descriptor <code>1</code> (<code>stdout</code>) and write it to a file called <code>all-output.txt</code></li></ul><p>To write <em>everything</em> to the file, try do this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> /usr/bin /nothing </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> all-output.txt </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will work. Breaking it down:</p><ul><li>Redirect <code>stdout</code> to the file <code>all-output.txt</code></li><li>Now redirect <code>stderr</code> to <code>stdout</code> - which by this point <em>has already been redirected to a file</em></li></ul><p>This can be tough to remember so it&#x27;s worth trying it out<sup id="fnref-4"><a href="#fn-4" class="footnote-ref">4</a></sup>. There are many variations you can play with and we&#x27;ll see more as we go through the book.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="one-last-trick---the-t-pipe">One Last Trick - The T Pipe<a class="hash-link" href="#one-last-trick---the-t-pipe" title="Direct link to heading">​</a></h2><p>This is a long chapter, but I can&#x27;t talk about pipelines without briefly mentioning the T pipe. Check out this command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> ~/effective-shell/text/simpsons-characters.txt </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> sorted.txt </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">uniq</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^A&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command sorts the list of Simpsons characters, removes duplicates and filters down to ones which start with the letter <code>A</code>. And it has the <code>tee</code> command in the middle. What does this do?</p><p>Well the <code>tee</code> command is like a T-pipe in plumbing - it lets the stream of data go in two directions! The <code>sorted.txt</code> file contains the sets of characters <em>after</em> the sort operation, but before the unique and filter operation. Visually, it does this:</p><img loading="lazy" src="/assets/images/diagram-tee-6ad6dadcfa804f75f96b36807ffd688b.png" alt="Diagram: Tee" width="1024px" class="img_ev3q"><p>As soon as you visualise a T-pipe it&#x27;s easy to remember this useful command! You might use it in more complex pipelines or other scenarios to write things to a file which would otherwise go straight to another program or just the display.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="thinking-in-pipelines">Thinking in Pipelines<a class="hash-link" href="#thinking-in-pipelines" title="Direct link to heading">​</a></h2><p>Once you get comfortable with pipelines, a whole world of possibilities open up.</p><p>Just the day before I wrote this chapter, I had to find out how many unique data points were in a data file, which also included empty lines and comments, it took less than a minute to quickly build this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> data.dat </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">uniq</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> -v </span><span class="token string" style="color:#e3116c">&#x27;^#&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wc</span><span class="token plain"> -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>I didn&#x27;t have to find a special program which does exactly what I needed<sup id="fnref-5"><a href="#fn-5" class="footnote-ref">5</a></sup> - I just incrementally built a pipeline. Each section I added one by one, writing to the screen each time, until I had it working. The thought process was:</p><ul><li><code>cat data.dat</code> - OK, first I need to write out the file</li><li><code>sort</code> - now I can sort it, that&#x27;ll put all the blank lines together</li><li><code>uniq</code> - this&#x27;ll remove all of those <em>duplicate</em> blank lines, although it still leaves one blank one at the top!</li><li><code>grep -v &#x27;^#&#x27;</code> - this should get rid of all the lines which start with <code>#</code></li><li><code>wc -l</code> - this&#x27;ll count the number of lines I&#x27;m left with</li></ul><p>Now there&#x27;s probably better ways, and this has an oddity which is that if there are blank lines it&#x27;ll remove all but one of them (although that would be quick to fix), but it gave me my quick and dirty answer in less than a minute.</p><p>Of course, as things get more complex you might want to build scripts, or use a programming language, or other methods, but this <em>Unix Philosophy</em> (which we&#x27;ll talk about more as we continue) of having lots of small, simple programs which we can chain together can be immensely powerful.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">​</a></h2><p>We&#x27;ll see pipelines again and again. The standard streams, redirection, pipelines and all of the tricks we&#x27;ve introduced in this chapter are fundamental not only to using the shell effectively, but really understanding how computer programs work.</p><p>Don&#x27;t be worried if this feels like a lot to take in - we&#x27;ll see more and more examples in later chapters which will help reinforce these concepts. If you find yourself struggling later you might want to quickly review this chapter, because we introduced a lot!</p><p>In this chapter we looked at:</p><ul><li>How each program has access to three &#x27;standard&#x27; streams - one for input, one for output and one for reporting errors</li><li>The standard input stream is available as a file at <code>/dev/stdin</code>, is often called <code>stdin</code> in programming languages, and always has the special file descriptor <code>0</code></li><li>The standard output stream is available as a file at <code>/dev/stdout</code>, is often called <code>stdout</code> in programming languages, and always has the special file descriptor <code>1</code></li><li>The standard error stream is available as a file at <code>/dev/stderr</code>, is often called <code>stderr</code> in programming languages, and always has the special file descriptor <code>2</code></li><li>The <code>Ctrl+D</code> sequence means &#x27;end of transmission&#x27; - we can use it to signal that we have completed putting our input into <code>stdin</code>...</li><li>...but the <code>Ctrl+C</code> sequence means &#x27;interrupt&#x27; and is normally used to force a program to close</li><li>We can <em>pipe</em> the output of one program to the input of another with the pipe <code>|</code> symbol</li><li>We can <em>redirect</em> a file to the standard input of a program with the <code>&lt;</code> operator</li><li>We can <em>redirect</em> the standard output of a program to create or overwrite a file with the <code>&gt;</code> operator</li><li>We can <em>redirect</em> the standard output of a program to create or append to a file with the <code>&gt;&gt;</code> operator</li><li>We can redirect the standard error of a program to its standard output with <code>2&gt;&amp;1</code></li><li>We can redirect the standard error of a program to another file (such as the &#x27;null&#x27; file) with <code>2&gt;/dev/null</code></li><li>We can redirect the standard error of a program to create or append to a file, just like with standard output, using the <code>&gt;&gt;</code> operator</li></ul><p>We also briefly saw some commands:</p><ul><li><code>sort</code> sorts text</li><li><code>sed</code> can replace content in text</li><li><code>tr</code> can replace parts of text</li><li><code>wc</code> can count words or lines of text</li><li><code>tee</code> takes the input stream and sends it straight to the output, but also to a file (like a T-pipe in plumbing)</li><li><code>grep</code> can filter lines</li></ul><p>These programs can do a lot more and are workhorses we&#x27;ll see in more detail through the book.</p><p>There are a few chapters which are planned to come later which go into detail on some of the concepts we only briefly touched on:</p><ul><li>Writing Good Programs - How to write programs which use <code>stdin</code>, <code>stdout</code> and <code>stderr</code> sensibly</li><li>The Unix Philosophy - Why we have so many small simple programs which we can pipe together</li><li>Streams in Detail - How streams like <code>stdin</code> actually work, especially with things like line endings, command sequences like <code>^D</code> and so on</li><li>Signals - A little more on Signals (such as <code>^C</code> and <code>^D</code>)</li></ul><p>When these chapters are published I&#x27;ll update the links here. If you want to be updated when new chapters are published, you can <a href="https://effective-shell.com" target="_blank" rel="noopener noreferrer">Join the Mailing Lits on the Homepage</a>.</p><div class="footnotes"><hr><ol><li id="fn-1">Technically there is another layer here, which is the <code>tty</code>. You can see this by running <code>tty</code> in the shell. We&#x27;ll talk more about this in the <a href="/part-2-core-skills/what-is-a-shell">Interlude - What is a Shell</a> section.<a href="#fnref-1" class="footnote-backref">↩</a></li><li id="fn-2">Check <a href="/part-1-transitioning-to-the-shell/become-a-clipboard-gymnast/">Chapter 4 - Becoming a Clipboard Gymnast</a> for how to do this on a Linux or Windows machine.<a href="#fnref-2" class="footnote-backref">↩</a></li><li id="fn-3">Although always use tricks like this with caution! If we had a <em>different</em> error, perhaps one we really do want to know about, we would lose the message in this case.<a href="#fnref-3" class="footnote-backref">↩</a></li><li id="fn-4">There is a very detailed explanation of this behaviour at <a href="https://linuxnewbieguide.org/21-and-understanding-other-shell-scripts-idioms/" target="_blank" rel="noopener noreferrer">https://linuxnewbieguide.org/21-and-understanding-other-shell-scripts-idioms/</a>.<a href="#fnref-4" class="footnote-backref">↩</a></li><li id="fn-5">With the correct options, <code>sed</code> could likely do this in a single operation, but I&#x27;d probably spend a lot longer Googling the right options for it!<a href="#fnref-5" class="footnote-backref">↩</a></li></ol></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/dwmkerr/effective-shell/edit/main/docs/02-core-skills/07-thinking-in-pipelines/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/part-2-core-skill/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Part 2 - Core Skills</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/part-2-core-skills/fly-on-the-command-line"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Fly on the Command Line</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#input-and-output" class="table-of-contents__link toc-highlight">Input and Output</a></li><li><a href="#standard-input-output-and-error" class="table-of-contents__link toc-highlight">Standard Input, Output and Error</a></li><li><a href="#a-pipeline-in-action" class="table-of-contents__link toc-highlight">A Pipeline in Action</a></li><li><a href="#common-patterns---standard-input" class="table-of-contents__link toc-highlight">Common Patterns - Standard Input</a></li><li><a href="#common-patterns---standard-output" class="table-of-contents__link toc-highlight">Common Patterns - Standard Output</a></li><li><a href="#common-patterns---standard-error" class="table-of-contents__link toc-highlight">Common Patterns - Standard Error</a></li><li><a href="#one-last-trick---the-t-pipe" class="table-of-contents__link toc-highlight">One Last Trick - The T Pipe</a></li><li><a href="#thinking-in-pipelines" class="table-of-contents__link toc-highlight">Thinking in Pipelines</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Effective Shell</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/donate">Donate</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/dwmkerr/effective-shell" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/dwmkerr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Effective Shell v0.34.10. Copyright © 2025 Dave Kerr. Website built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.00eb20ad.js"></script>
<script src="/assets/js/main.6c7311e1.js"></script>
</body>
</html>