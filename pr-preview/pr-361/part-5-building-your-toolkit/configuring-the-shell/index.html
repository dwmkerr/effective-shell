<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-building-your-toolkit/configuring-the-shell/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Configuring the Shell | Effective Shell</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://effective-shell.com/part-5-building-your-toolkit/configuring-the-shell"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="google-site-verification" content="ca-pub-6181461532532600"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configuring the Shell | Effective Shell"><meta data-rh="true" name="description" content="There are a number of different ways to configure your shell. In this chapter we&#x27;ll take a look at the different configuration files for the shell and how they work, and how you can change your shell configuration with options."><meta data-rh="true" property="og:description" content="There are a number of different ways to configure your shell. In this chapter we&#x27;ll take a look at the different configuration files for the shell and how they work, and how you can change your shell configuration with options."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://effective-shell.com/part-5-building-your-toolkit/configuring-the-shell"><link data-rh="true" rel="alternate" href="https://effective-shell.com/part-5-building-your-toolkit/configuring-the-shell" hreflang="en"><link data-rh="true" rel="alternate" href="https://effective-shell.com/part-5-building-your-toolkit/configuring-the-shell" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HZFMZV9Z4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-8HZFMZV9Z4",{anonymize_ip:!0})</script>


<script src="https://cdn.jsdelivr.net/npm/docusaurus-plugin-drawio/viewer.min.js"></script>


<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6181461532532600" async></script>
<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6181461532532600" async></script><link rel="stylesheet" href="/assets/css/styles.51892cac.css">
<link rel="preload" href="/assets/js/runtime~main.8cd47f87.js" as="script">
<link rel="preload" href="/assets/js/main.6c7311e1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Effective Shell Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Effective Shell Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Effective Shell</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="navbar__item navbar__link" href="/donate">Donate</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div><a href="https://github.com/dwmkerr/effective-shell/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-1-transitioning-to-the-shell/">Transitioning to the Shell</a><button aria-label="Toggle the collapsible sidebar category &#x27;Transitioning to the Shell&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-2-core-skill/">Core Skills</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core Skills&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-3-manipulating-text/">Manipulating Text and Streams</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manipulating Text and Streams&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-4-shell-scripting/">Shell Scripting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Shell Scripting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/part-5-building-your-toolkit/">Building Your Toolkit</a><button aria-label="Toggle the collapsible sidebar category &#x27;Building Your Toolkit&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/part-5-building-your-toolkit/configuring-the-shell">Configuring the Shell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/customising-your-command-prompt">Customising Your Command Prompt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/managing-your-dotfiles">Managing your Dotfiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/controlling-changes-with-git">Controlling Changes with Git</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/managing-rempte-git-repositories/">Managing Remote Git Repositories and Sharing Your Dotfiles</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-6-advanced-techniques/">Advanced Techniques</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced Techniques&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/xx-appendices/installing-samples/">Appendices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zz-developer-guide/components">Developer Guide</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuring the Shell</h1></header><p>There are a number of different ways to configure your shell. In this chapter we&#x27;ll take a look at the different configuration files for the shell and how they work, and how you can change your shell configuration with options.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-shell-configuration-file">The Shell Configuration File<a class="hash-link" href="#the-shell-configuration-file" title="Direct link to heading">​</a></h2><p>There are a number of different files that the shell uses for configuration, and we&#x27;re going to see all of them in this chapter. However, the file we will use most often is the <em>~/.bashrc</em> file.</p><p>When you log into a machine using the shell, or start a shell program in a terminal emulator like the Gnome Terminal or Konsole, you are running an <em>interactive shell</em>. An interactive shell is one that is connected to your keyboard and screen.</p><p>When an interactive shell starts, one of the operations it performs is to run all of the commands in the file <em>~/.bashrc</em>. This is one of the &#x27;shell startup&#x27; files.</p><p>The &#x27;RC&#x27; in the file name stands for &#x27;run commands&#x27; (sometimes people will also refer to this as &#x27;run configuration&#x27;). This is a convention from the early days of Unix. Many tools on Unix and Linux have files that end in &#x27;rc&#x27; that are loaded when a program starts up. For example, the <em>~/.vimrc</em> run commands file is loaded by the <code>vim</code> program when it starts.</p><p>The <em>~/.bashrc</em> file is in your home directory - this means that it is your personal Bash configuration file. There is also a file that is normally at <em>/etc/bash.bashrc</em> that is used to configure Bash for all users.</p><p>Again - this is a common convention for Unix and Linux systems - there is a &#x27;global&#x27; configuration file that is used for all users, as well as a &#x27;user&#x27; configuration file in the user&#x27;s home directory that the user can edit to personalise things for themselves.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Z-Shell</div><div class="admonitionContent_S0QG"><p>The <code>zsh</code> shell uses a <em>~/.zshrc</em> file for per-user configuration and <em>/etc/zsh/zshrc</em> for global configuration. The paths are different but the concepts are the same. Other shells may use different paths as well - you should be able to find the paths in their manual pages.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-default-configuration-file">The Default Configuration File<a class="hash-link" href="#the-default-configuration-file" title="Direct link to heading">​</a></h3><p>Let&#x27;s take a look at some of the commands that are in the <em>~/.bashrc</em> on a clean Ubuntu 20 installation (if you want to know how to set up a free Ubuntu 20 machine check <a href="/work-in-progress">Appendix - Setting Up a Linux Virtual Machine</a>.</p><p>I&#x27;ve omitted parts of the file in the snippet below, we&#x27;ll focus on some of the most interesting areas.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># If not running interactively, don&#x27;t do anything</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> $- </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *i*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      *</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin class-name">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">esac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># don&#x27;t put duplicate lines or lines starting with space in the history.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># See bash(1) for more options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable environment constant" style="color:#36acaa">HISTCONTROL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ignoreboth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># append to the history file, don&#x27;t overwrite it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">shopt</span><span class="token plain"> -s histappend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># for setting history length see HISTSIZE and HISTFILESIZE in bash(1)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable environment constant" style="color:#36acaa">HISTSIZE</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable environment constant" style="color:#36acaa">HISTFILESIZE</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># some more ls aliases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ll</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ls -alF&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">la</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ls -A&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">l</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ls -CF&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It&#x27;s very important to understand that this file is <em>sourced</em> by the shell - so we have to use <code>return</code> if we want to stop processing it. If we used <code>exit</code> instead then the shell would close, which is definitely not what we want! If you need a reminder on sourcing, check <a href="/part-3-manipulating-text/shell-script-essentials/">Chapter 18 - Shell Script Essentials</a>.</p><p>The next section of the file sets up some of the configuration for the history features of the shell. Some variables are set, such as <code>HISTSIZE</code> (the number of commands to store in the history), we also set some options using the <code>shopt</code> (<em>set shell option</em> flag).</p><p>Later on, we can see that some aliases are defined, for user convenience. For example, the <code>la</code> alias is a shorthand for <code>ls -A</code>, which can save a few keystrokes.</p><p>This exactly the sort of configuration that makes sense to keep in the <em>~/.bashrc</em> file. Users can modify this to suit their preferences.</p><p>Now let&#x27;s look at some of the common features you might configure in the <em>~/.bashrc</em> file.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-shell-configurations">Common Shell Configurations<a class="hash-link" href="#common-shell-configurations" title="Direct link to heading">​</a></h3><p>You can add any commands you like to the <em>~/.bashrc</em> file, these commands will be run when the shell starts up.</p><p>Let&#x27;s see a few examples of what you might add to your <em>~/.bashrc</em>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="aliases">Aliases<a class="hash-link" href="#aliases" title="Direct link to heading">​</a></h4><p>If you find yourself typing the same series of keystrokes again and again, you might want to add some aliases to your configuration file:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Start a web server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">serve</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;python3 -m SimpleHTTPServer 3000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Open vim without loading the vimrc.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">vimnilla</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;vi -u NONE&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Shortcut for &#x27;kubectl&#x27;, saves a lot of time!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">k</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;kubectl&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Quickly go to my GitHub repositories.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">gocode</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;cd ~/repos/github/dwmkerr&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you are not familiar with aliases, check <a href="/part-2-core-skills/understanding-commands">Chapter 10 - Understanding Commands</a>.</p><p>You might also use aliases to change the behaviour of existing commands. For example, we can change the <code>rm</code> command to automatically ask for confirmation before a file is deleted:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Always run &#x27;rm&#x27; in interactive mode.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">rm</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;rm -i&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Be aware that the more you customise default commands the more that you run the risk that tutorials or samples you use may not work as expected, as those samples will expect the <em>default</em> behaviour of the command.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a class="hash-link" href="#functions" title="Direct link to heading">​</a></h4><p>If you have more complex operations that you regularly perform, you could add them to your <em>~/.bashrc</em> as a function:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Restart the shell.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">restart-shell</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">exec</span><span class="token plain"> -l </span><span class="token environment constant" style="color:#36acaa">$SHELL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Make a directory (don&#x27;t fail if it exists) and move into it in one line.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-name function" style="color:#d73a49">mkd</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p -- </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$1</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> -P -- </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$1</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Cut, but in reverse, e.g:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># $ echo &quot;One;Two;Three;Four;Five&quot; | revcut -d&#x27;;&#x27; -f2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># -&gt; Four</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-name function" style="color:#d73a49">revcut</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">rev</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cut</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$@</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rev</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find out more about functions in <a href="/part-4-shell-scripting/functions-parameters-and-error-handling">Chapter 22 - Functions, Parameters and Error Handling</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="shell-options">Shell Options<a class="hash-link" href="#shell-options" title="Direct link to heading">​</a></h4><p>The <em>~/.bashrc</em> file is the ideal place to configure shell options to suit your preferences:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># If we enter a directory name on its own, assume we want to &#x27;cd&#x27; into it.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">shopt</span><span class="token plain"> -s autocd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example we use the <code>shopt</code> (<em>set shell option</em>) command to set the <code>autocd</code> option. This option allows you to enter the name of a directory as if it was a command, when you press &#x27;enter&#x27; the shell will <code>cd</code> into the directory.</p><p>You can set an option using the <code>-s</code> (<em>set option</em>) flag and unset an option with the <code>-u</code> (<em>unset option</em>) flag.</p><p>You can list the options available to set by running <code>shopt -p</code>, or searching the <code>man bash</code> page for <code>shopt</code>. Some of the most useful options are:</p><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>autocd</code></td><td>Enter a directory name as a command and the shell will <code>cd</code> to it.</td></tr><tr><td><code>cdable_vars</code></td><td>Allows you to <code>cd</code> into a variable, such as <code>repos=~/repos; cd repos</code></td></tr><tr><td><code>cdspell</code></td><td>The shell will try to fix typos to the <code>cd</code> command.</td></tr><tr><td><code>checkjobs</code></td><td>Show the status of stopped and running jobs before exiting the shell.</td></tr><tr><td><code>cmdhist</code></td><td>Save multi-line commands in the shell history as single entries, rather than an entry per line.</td></tr><tr><td><code>dirspell</code></td><td>Try to correct typos when auto-completing directory names.</td></tr><tr><td><code>globstar</code></td><td>Support recursive globbing such as <code>**/*.py</code> to find files in subdirectories.</td></tr><tr><td><code>histappend</code></td><td>Append to the history file when the shell exists, rather than overwriting it.</td></tr></tbody></table><p>As well as the options that can be set using the <code>shopt</code> command, there are also many variables that are used to configure the shell. We&#x27;ve seen some of these variables already, such as the <code>EDITOR</code> variable that defines what text editor to use and the <code>PAGER</code> variable that defines what pager program to use.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="changing-the-command-prompt">Changing the Command Prompt<a class="hash-link" href="#changing-the-command-prompt" title="Direct link to heading">​</a></h4><p>The command prompt is the information that is shown to the left of the caret in the shell where you enter commands. It will often look something like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@ip-172-31-28-144:~/effective-shell$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command prompt in this example is made up of the following parts:</p><ul><li><code>ubuntu</code> - the name of the current user</li><li><code>ip-172-31-28-144</code> - the hostname of the machine</li><li><code>~/effective-shell</code> - the current directory</li><li><code>$</code> - an indicator showing that we are using Bash (this will be <code>#</code> if we are a super user)</li></ul><p>The structure and format of the command prompt can be configured using the <code>PS1</code> variable. This is a large enough topic that the whole of the next chapter is dedicated to customising the command prompt.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="source-files">Source Files<a class="hash-link" href="#source-files" title="Direct link to heading">​</a></h4><p>Another common pattern for the <em>~/.bashrc</em> file is to simply <code>source</code> another file.</p><p>For example, you might want to create a set of common functions that you keep in a file called <em>shell-functions.sh</em>. You could source this file as part of your shell configuration:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Load my common shell functions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">source</span><span class="token plain"> ~/shell-functions.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In fact, a lot of the shell startup files do exactly this. For example, in the default <em>~/.bashrc</em> file on Ubuntu 20, you will see these lines:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -f ~/.bash_aliases </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">.</span><span class="token plain"> ~/.bash_aliases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This line uses the <code>-f</code> test to see whether a file named <em>~/.bash_aliases</em> exists. If it does, it is loaded (using <em>dot sourcing</em> as the notation).</p><p>There are lots of different ways to manage your shell configuration. This can range from the simple, such as adding an alias to the <em>~/.bashrc</em> file, to the complex, such as sourcing the contents of an entire directory, or configuring a shell dynamically based on what tools are installed on a system.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-your-system">Configure Your System<a class="hash-link" href="#configure-your-system" title="Direct link to heading">​</a></h4><p>You might have particular commands you want to ensure are run when you start a shell. For example, let&#x27;s say that you want to always have a folder named <em>~/today</em> that links to a temporary folder which is updated daily.</p><p>To do this, you could add the following commands to the <em>~/.bashrc</em> file:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Get today&#x27;s date in the format YYYY-MM-DD.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">today</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">date</span><span class="token variable" style="color:#36acaa"> +</span><span class="token variable string" style="color:#e3116c">&quot;%Y-%m-%d&quot;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create the path to today&#x27;s temp folder and then make sure the folder exists.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">temp_path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/tmp/</span><span class="token string variable" style="color:#36acaa">${today}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${temp_path}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Now that we&#x27;ve created the folder, make a symlink to it in our homedir.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -sf </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${temp_path}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${</span><span class="token string variable environment constant" style="color:#36acaa">HOME</span><span class="token string variable" style="color:#36acaa">}</span><span class="token string" style="color:#e3116c">/today&quot;</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If I add this code to my <em>~/.bashrc</em> file then whenever I start a new shell, a folder will be created with today&#x27;s date in the <em>/tmp/</em> directory, and a link will be created to this folder at <em>~/today</em>. This provides a convenient way to have a temporary working folder for the day. You can then go back and refer to old temporary folders if you need to.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-tips">Configuration Tips<a class="hash-link" href="#configuration-tips" title="Direct link to heading">​</a></h4><p>There are a few things that you should pay attention to when working with startup files.</p><p><strong>Do not print output</strong></p><p>It is considered bad practice to print output during startup of the shell. Avoid running commands like <code>echo</code> or <code>printf</code>. If you call commands that write to <em>stdout</em> then silence the output by piping it to <em>/dev/null</em>.</p><p><strong>Do not run long operations</strong></p><p>You might have written a cool scripts that pulls down information on stocks or weather from a website, ready to show in your shell. But avoid running anything in a startup file that can take a lot of time. Every time you start your shell you&#x27;ll have a delay while the command runs and this can really slow you down!</p><p><strong>Be careful not to break things</strong></p><p>Don&#x27;t run so many commands that you might cause errors or failures on startup. This can make your shell difficult to use or slow to start up. If your startup logic is failing it can be hard to debug, so try not to make it too complex!</p><p><strong>Clean up after yourself!</strong></p><p>Remember, any variables you set will be set for all shells that read the startup file. If there are variables that you only need during the processing of the file, consider using the <code>unset</code> command to unset the variable at the end of startup.</p><p><strong>Expect commands to be run multiple times</strong></p><p>Write your startup files with the assumption that they will be run multiple times. If you start a new shell from your current shell, your configuration file will be loaded again. Your configuration should not cause errors if it is run multiple times!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="shell-startup">Shell Startup<a class="hash-link" href="#shell-startup" title="Direct link to heading">​</a></h2><p>In most cases you will only need to work with the <em>~/.bashrc</em> file to configure your shell. However, the shell actually uses a number of different configuration files (which are called &#x27;startup files&#x27;) depending on how the shell is being used.</p><p>You may have seen references to files such as <em>/etc/profile</em>, <em>~/.bash_profile</em>, <em>~/.bash_logout</em> and more. The different files that are used can be quite confusing. For the rest of this chapter we&#x27;re going to go into the details of exactly how the shell uses these different files.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="different-types-of-shells">Different Types of Shells<a class="hash-link" href="#different-types-of-shells" title="Direct link to heading">​</a></h2><p>For us to be able to understand how shells are configured, we need to understand the different types of shells that can run. This does not mean different shell programs, such as <code>bash</code>, <code>zsh</code> or <code>dash</code>, but instead the differences between <em>interactive</em> and <em>non-interactive</em> shells, as well as <em>login</em> shells.</p><p>A lot of people get confused by how the shell is configured because they don&#x27;t fully understand what these different types of shells are. So let&#x27;s introduce each one, what it is and how it is used.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="interactive-shells">Interactive Shells<a class="hash-link" href="#interactive-shells" title="Direct link to heading">​</a></h3><p>An <em>interactive shell</em> is any shell that has its input, output and error standard streams connected to a terminal. This sounds complicated, but it really just means that an interactive shell is one that you interact with via the keyboard and display!</p><p>When we type commands into our shell, we&#x27;re using an interactive shell.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="non-interactive-shells">Non-Interactive Shells<a class="hash-link" href="#non-interactive-shells" title="Direct link to heading">​</a></h3><p>Any shell that does not have its standard input, output and error streams attached to a terminal is generally called a <em>non-interactive shell</em>.</p><p>The most common example we&#x27;ve seen so far for non interactive shells are the shells that run shell scripts! Let&#x27;s run the <em>showpstree.sh</em> script from the samples to show the process tree for the current process. This script shows the process tree for the shell process it is running in and looks like this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># GNU pstree; use the long form (-l) show the command line (-a) and the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># details for a specific process (-s).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pstree -a -s </span><span class="token variable" style="color:#36acaa">$$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here&#x27;s the output when we run this script:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">~$ ./effective-shell/scripts/showpstree.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─sshd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └─sshd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          └─sshd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              └─bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  └─sh ./effective-shell/scripts/showpstree.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      └─pstree -a -s 1675</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output will look different depending on what system you are using, but the key section to focus on are the final three processes:</p><ul><li><code>pstree -a -s 1675</code> - this is just the <code>pstree</code> (<em>show process tree</em>) command that is run in the <em>showpstree.sh</em> script</li><li><code>sh ./effective-shell/scripts/showpstree.sh</code> - this is a <em>non-interactive shell</em> that is running our shell script</li><li><code>bash</code> - this is the <em>interactive shell</em> that we used to invoke our shell script</li></ul><p>When you run a shell script, it runs in a <em>non-interactive</em> shell. This is really important to remember! Shell scripts are run in non-interactive shells. This means that anything you define in <em>~/.bashrc</em> will not be loaded, so don&#x27;t try and use aliases or other customisations that you have made.</p><p>In fact, on many distributions you will see the following lines in the default <em>~/.bashrc</em>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># If not running interactively, don&#x27;t do anything</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> $- </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *i*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      *</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin class-name">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">esac</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The first section of the script checks the current shell parameters (which are stored in the special <code>$-</code> variable) to see whether the <code>i</code> (<em>interactive</em>) parameter is present. If it is not present, the <code>return</code> command runs. This check for the shell parameters ensures that even if a non-interactive shell does load the run commands file for some reason, it stops reading it right away.</p><p>If you need a refresher on how the <code>case</code> statement works, check <a href="/part-4-shell-scripting/mastering-conditional-logic">Chapter 20 - Mastering Conditional Logic</a>.</p><p>Another way to show a non-interactive shell in action is to simply invoke the shell program with a specified command from the command like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ sh -c &quot;echo $((5 + 5))&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example we started the <code>sh</code> (<em>shell</em>) program and provided a command via the <code>-c</code> (<em>command</em>) flag. This starts a non-interactive shell.</p><p>Why do non-interactive shells not load the configuration file? There are two reasons. The first is that it doesn&#x27;t make sense for scripts to rely on user-level customisations. If one user has an alias and refers to it in a script, then the script will not run for another user unless they have the same alias. The second reason is for performance - when using a shell to run a script the shell can start much more quickly if it doesn&#x27;t need to load configuration or customisations.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="login-shells">Login Shells<a class="hash-link" href="#login-shells" title="Direct link to heading">​</a></h3><p>When you login to a computer with a shell, entering credentials such as a username and password, then you are using a <em>login shell</em>. A login shell will normally run some initial setup of your environment and provide the bare minimum configuration required to work with the system. For example, most shells set up the <code>$PATH</code> variable as part of the initialisation of the login shell.</p><p>For systems that don&#x27;t have a graphical interface, any shell you create will be a child of the login shell, so will inherit the login shell&#x27;s configuration. For graphical interfaces to systems, such as KDE or Gnome, when you log in with the graphical interface, the desktop manager normally configures the environment using the same configuration as is used for a login shell. The desktop manager process will therefore have variables like the <code>$PATH</code> set up just as if you had logged in at the command line.</p><p>When you <code>ssh</code> onto a remote machine, you will be running a login shell. In most cases, when you switch users with commands like <code>su</code> (<em>set user</em>), you will start a login shell as well<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>.</p><p>The key thing to remember about login shells is that they are normally run once, when you start working with a computer, and all of the other shells you then run will be children of the login shell.</p><p>You can see whether your shell is a login shell by examining the <code>$0</code> variable. This variable holds the parameters that were provided to start the shell. By convention, if the parameter starts with a <code>-</code> dash symbol, you can assume that you are in a login shell.</p><p>Let&#x27;s see an example of this in action by logging into a virtual machine (if you would like to set up your own Linux virtual machine you can follow the guide in <a href="/work-in-progress">Appendix - Setting Up a Linux Virtual Machine</a>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ssh effective-shell-ubuntu-20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Welcome to Ubuntu 20.04.2 LTS (GNU/Linux 5.4.0-1045-aws x86_64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To run a command as administrator (user &quot;root&quot;), use &quot;sudo &lt;command&gt;&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">See &quot;man sudo_root&quot; for details.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~$ echo &quot;$0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we can see that the parameter that the shell was started with was <code>-bash</code>. This starts with a <code>-</code> dash symbol, indicating that it is a login shell.</p><p>Login shells are <em>normally</em> interactive shells, but it is possible to run a non-interactive login shell (it&#x27;s just quite an unusual thing to do).</p><p>In the early days of Unix, executing any commands could be time consuming. The login shell would perform the most essential configuration only once when a user logs in and all subsequent shell processes could start more quickly as they would inherit the login configuration and then load the user specific configuration.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="shell-startup-files">Shell Startup Files<a class="hash-link" href="#shell-startup-files" title="Direct link to heading">​</a></h2><p>When the shell starts, it reads a set of <em>startup files</em>. These files are shell scripts that are <em>sourced</em> by the shell. A script that is sourced is loaded into the <em>current</em> shell process, rather than running in a new shell process.</p><p>For many people, the various different files that are loaded can cause confusion. But as long as you understand the different types of shells that exist, it is actually quite straightforward to understand the process.</p><p>When a <em>login</em> shell starts, the following steps are taken:</p><ul><li>The shell attempts to load the <em>profile file</em></li><li>The <em>profile file</em> will normally load the <em>run commands</em> file</li></ul><p>When an <em>interactive</em> shell starts, the following steps are taken:</p><ul><li>The shell attempts to load the <em>run commands</em> file</li></ul><p>When a <em>non-interactive</em> shell starts, it doesn&#x27;t load any configuration files, unless one has been specified in the <code>BASH_ENV</code> variable.</p><p>Let&#x27;s take a look at these files in detail.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-shell-profile-fileindex">The Shell Profile File<a class="hash-link" href="#the-shell-profile-fileindex" title="Direct link to heading">​</a></h3><p>When a login shell is started, the shell loads and executes commands from the <em>/etc/profile</em> file.</p><p>The profile file contains the most essential configuration that is required. It is often used to set things like the <code>$PATH</code> environment variable, which will sometimes have different values depending on the operating system you are using.</p><p>The shell will then attempt to read each of the following files. If the shell finds one that is readable, it reads it and executes its commands, and then does not attempt to read the others:</p><ul><li><em>~/.bash_profile</em></li><li><em>~/.bash_login</em></li><li><em>~/.profile</em></li></ul><p>There are very few circumstances in which you should change any of these files. It is based to think of the profile files as essential operating system specific configuration that is needed to have a functional login shell.</p><p>When a login shell closes, it will run any commands in the <em>~/.bash_logout</em> file. However, users might terminate the shell process forcibly, which means that you cannot be sure this file will always be sourced as the shell exits.</p><p>The configuration that the startup files perform varies from distribution to distribution, but in general they will do at least the following:</p><ul><li>Set the <code>$PATH</code> variable to include the appropriate folders for tools for your distribution</li><li>Set the shell prompt, the characters that are shown to the user to show they need to enter input (such as <code>~$</code> when we are in the home folder, or <code>~#</code> if we are in the home folder as a super user)</li><li>Set up auto-completion (the feature that allows you to press &#x27;tab&#x27; to see suggestions when entering commands)</li><li>Load the <em>run commands</em> file - we&#x27;ll look at this file next</li></ul><p>The key thing to remember about the profile files is that you normally don&#x27;t need to change them and they normally load the <em>run command</em> file for you.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-shell-run-commands-fileindex">The Shell Run Commands File<a class="hash-link" href="#the-shell-run-commands-fileindex" title="Direct link to heading">​</a></h3><p>When an interactive non-login shell is started, the shell loads and executes the commands from the <em>/etc/bash.bashrc</em> file and then the <em>~/.bashrc</em> file (if they exist).</p><p>It is also convention that you can have two <code>rc</code> files - one that is for <em>all</em> users (in this case, <em>/etc/bash.bashrc</em>) and one that is user specific (in this case, <em>~/.bashrc</em>).</p><p>The <em>~/.bashrc</em> file is where you can put your own commands to configure the shell to suit how you want to use it. This is the file we spent the first half of the chapter looking at in detail.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="startup-files-for-non-interactive-shells">Startup Files for Non-Interactive Shells<a class="hash-link" href="#startup-files-for-non-interactive-shells" title="Direct link to heading">​</a></h3><p>If you need to load a startup file for a non-interactive shell, you can set the <code>BASH_ENV</code> variable to the path of the file that you want to load. In general you should be very careful when doing this, as shell commands or shell scripts should be written so that they can operate without a startup file being loaded.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="login-shells-and-desktop-managers">Login Shells and Desktop Managers<a class="hash-link" href="#login-shells-and-desktop-managers" title="Direct link to heading">​</a></h3><p>Before the advent of the graphical user interface, almost all shell processes would be children of a login shell, as you had to use a login shell to access the system.</p><p>For modern systems that use a desktop environment such as Gnome or KDE, the desktop manager process normally loads the <code>/etc/profile</code> file. This means that when you open a terminal program use as the Gnome Terminal or Konsole, the shell is a child of a process which has loaded the profile. Even if you don&#x27;t use a login shell to access a system, you can normally be sure that the profile will have been loaded by the desktop manager.</p><p>Different distributions and operating systems may handle this in slightly different ways. For example, on MacOS when you run the Terminal program it actually starts a login shell<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>. Again, this means that you can be sure that the profile has been loaded (which in turn will load the RC files).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="changing-your-shell">Changing Your Shell<a class="hash-link" href="#changing-your-shell" title="Direct link to heading">​</a></h2><p>You can see the shell that is currently set as the default shell for a user by checking the <em>/etc/passwd</em> file. Here&#x27;s how I could see what shell is used when the <code>dwmkerr</code> user logs in:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ grep &#x27;dwmkerr&#x27; /etc/passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr:x:1001:1001:Dave Kerr,,,:/home/dwmkerr:/bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <em>/etc/passwd</em> file keeps track of the local user accounts on the system. The final item on a line is the shell that is used for the user. When a user logs in, their shell is set in the <code>SHELL</code> environment variable, we can write this value out with the <code>echo</code> command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;My shell is: $SHELL&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">My shell is: /bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There are a few ways that you can change your shell. However, before you change your shell, you need to make sure that the shell you want to use is listed in the &#x27;available shells&#x27; file. This file is kept at <em>/etc/shells</em>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat /etc/shells</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># /etc/shells: valid login shells</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bin/rbash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/rbash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bin/dash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/dash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/tmux</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the shell you want to use is <em>not</em> listed in <em>/etc/shells</em> you will need to add it to the list.</p><p>Once you have installed the shell you want to use and added it to the <em>/etc/shells</em> list you can run the <code>chsh</code> (<em>change shell</em>)<!-- --> command to change the shell for a given user:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ chsh -s /bin/sh dwmkerr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>-s</code> (<em>shell</em>) parameter is used to specify the shell path. After this we provide the name of the user we are changing the shell for. On many systems users are allowed to change their own shell as long as it is in the <em>/etc/shells</em> list. To change the shell for <em>another</em> user, or to use a shell that is <em>not</em> in the <em>/etc/shells</em> list the <code>chsh</code> command will need to be run as a super-user.</p><p>You can also change the shell for a user by editing the <em>/etc/passwd</em> file.</p><p>Changing your shell is an advanced topic - if you prefer to use another shell you could also simply start the shell from your login shell, for example by running <code>sh</code> from your Bash shell session.</p><p>As an end-to-end example, here&#x27;s how you would install <code>zsh</code> and set it for the current user on a Debian based system:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Elevate privileges to super-user.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">su</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Update the apt databases and install &#x27;zsh&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> update -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">zsh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Add &#x27;zsh&#x27; to the list of shell.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/bin/zsh&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /etc/shells</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Return to normal user mode.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Change the current user&#x27;s shell to &#x27;zsh&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chsh -s </span><span class="token string" style="color:#e3116c">&quot;/bin/zsh&quot;</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$USER</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Be careful when changing your shell - if you get this wrong then you may inadvertently lock yourself out of your account, if logging in tries to start a shell that is not properly configured. Always test that the new shell works before you set it!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">​</a></h2><p>In this chapter we saw how to customise shell configuration with the <em>~/.bashrc</em> file. We also looked in detail at the differences between login and non-login shells, interactive and non-interactive shells, and how these different shells load startup files.</p><p>You can find all of the detail on how the shell starts up in the <code>man bash</code> page, just search for <code>^INVOCATION</code>.</p><p>In the next chapter we will look at how you can set up your command prompt to suit your preferences.</p><div class="footnotes"><hr><ol><li id="fn-1">There are three excellent discussions on login and non-login shells and interactive shells <a href="https://askubuntu.com/questions/247738/why-is-etc-profile-not-invoked-for-non-login-shells" target="_blank" rel="noopener noreferrer">here</a>, <a href="https://askubuntu.com/questions/155865/what-are-login-and-non-login-shells" target="_blank" rel="noopener noreferrer">here</a> and <a href="https://unix.stackexchange.com/questions/38175/difference-between-login-shell-and-non-login-shell" target="_blank" rel="noopener noreferrer">here</a>.<a href="#fnref-1" class="footnote-backref">↩</a></li><li id="fn-2">There is a very good discussion on this topic at <a href="https://unix.stackexchange.com/questions/119627/why-are-interactive-shells-on-osx-login-shells-by-default" target="_blank" rel="noopener noreferrer">https://unix.stackexchange.com/questions/119627/why-are-interactive-shells-on-osx-login-shells-by-default</a>.<a href="#fnref-2" class="footnote-backref">↩</a></li></ol></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/dwmkerr/effective-shell/edit/main/docs/05-building-your-toolkit/24-configuring-the-shell/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/part-5-building-your-toolkit/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Part 5 - Building Your Toolkit</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/part-5-building-your-toolkit/customising-your-command-prompt"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Customising Your Command Prompt</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-shell-configuration-file" class="table-of-contents__link toc-highlight">The Shell Configuration File</a><ul><li><a href="#the-default-configuration-file" class="table-of-contents__link toc-highlight">The Default Configuration File</a></li><li><a href="#common-shell-configurations" class="table-of-contents__link toc-highlight">Common Shell Configurations</a></li></ul></li><li><a href="#shell-startup" class="table-of-contents__link toc-highlight">Shell Startup</a></li><li><a href="#different-types-of-shells" class="table-of-contents__link toc-highlight">Different Types of Shells</a><ul><li><a href="#interactive-shells" class="table-of-contents__link toc-highlight">Interactive Shells</a></li><li><a href="#non-interactive-shells" class="table-of-contents__link toc-highlight">Non-Interactive Shells</a></li><li><a href="#login-shells" class="table-of-contents__link toc-highlight">Login Shells</a></li></ul></li><li><a href="#shell-startup-files" class="table-of-contents__link toc-highlight">Shell Startup Files</a><ul><li><a href="#the-shell-profile-fileindex" class="table-of-contents__link toc-highlight">The Shell Profile Fileindex</a></li><li><a href="#the-shell-run-commands-fileindex" class="table-of-contents__link toc-highlight">The Shell Run Commands Fileindex</a></li><li><a href="#startup-files-for-non-interactive-shells" class="table-of-contents__link toc-highlight">Startup Files for Non-Interactive Shells</a></li><li><a href="#login-shells-and-desktop-managers" class="table-of-contents__link toc-highlight">Login Shells and Desktop Managers</a></li></ul></li><li><a href="#changing-your-shell" class="table-of-contents__link toc-highlight">Changing Your Shell</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Effective Shell</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/donate">Donate</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/dwmkerr/effective-shell" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/dwmkerr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Effective Shell v0.34.10. Copyright © 2025 Dave Kerr. Website built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8cd47f87.js"></script>
<script src="/assets/js/main.6c7311e1.js"></script>
</body>
</html>