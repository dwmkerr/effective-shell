"use strict";(self.webpackChunkeffective_shell=self.webpackChunkeffective_shell||[]).push([[5472],{3905:(e,i,t)=>{t.d(i,{Zo:()=>m,kt:()=>g});var n=t(7294);function l(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function a(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),t.push.apply(t,n)}return t}function I(e){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?a(Object(t),!0).forEach((function(i){l(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}return e}function r(e,i){if(null==e)return{};var t,n,l=function(e,i){if(null==e)return{};var t,n,l={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],i.indexOf(t)>=0||(l[t]=e[t]);return l}(e,i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],i.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var o=n.createContext({}),c=function(e){var i=n.useContext(o),t=i;return e&&(t="function"==typeof e?e(i):I(I({},i),e)),t},m=function(e){var i=c(e.components);return n.createElement(o.Provider,{value:i},e.children)},s="mdxType",h={inlineCode:"code",wrapper:function(e){var i=e.children;return n.createElement(n.Fragment,{},i)}},p=n.forwardRef((function(e,i){var t=e.components,l=e.mdxType,a=e.originalType,o=e.parentName,m=r(e,["components","mdxType","originalType","parentName"]),s=c(t),p=l,g=s["".concat(o,".").concat(p)]||s[p]||h[p]||a;return t?n.createElement(g,I(I({ref:i},m),{},{components:t})):n.createElement(g,I({ref:i},m))}));function g(e,i){var t=arguments,l=i&&i.mdxType;if("string"==typeof e||l){var a=t.length,I=new Array(a);I[0]=p;var r={};for(var o in i)hasOwnProperty.call(i,o)&&(r[o]=i[o]);r.originalType=e,r[s]="string"==typeof e?e:l,I[1]=r;for(var c=2;c<a;c++)I[c]=t[c];return n.createElement.apply(null,I)}return n.createElement.apply(null,t)}p.displayName="MDXCreateElement"},3708:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>o,contentTitle:()=>I,default:()=>s,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var n=t(7462),l=(t(7294),t(3905));const a={title:"Shell Snippets",slug:"/shell-snippets/"},I=void 0,r={unversionedId:"shell-snippets/index",id:"shell-snippets/index",title:"Shell Snippets",description:"After finishing the Effective Shell Book I still find myself regularly discovering techniques that are huge time-savers. I've called these Effective Shell Snippets and will update this page with them from time to time, so check back regularly!",source:"@site/docs/07-shell-snippets/00-index.md",sourceDirName:"07-shell-snippets",slug:"/shell-snippets/",permalink:"/shell-snippets/",draft:!1,editUrl:"https://github.com/dwmkerr/effective-shell/edit/main/docs/07-shell-snippets/00-index.md",tags:[],version:"current",sidebarPosition:0,frontMatter:{title:"Shell Snippets",slug:"/shell-snippets/"},sidebar:"sidebar",previous:{title:"Master the Multiplexer",permalink:"/part-6-advanced-techniques/master-the-multiplexer/"}},o={},c=[{value:"Git + AI: Interactively Staging Changes, Summarising with AI",id:"git--ai-interactively-staging-changes-summarising-with-ai",level:3},{value:"Open GitHub Page for Repo",id:"open-github-page-for-repo",level:3}],m={toc:c};function s(e){let{components:i,...a}=e;return(0,l.kt)("wrapper",(0,n.Z)({},m,a,{components:i,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"After finishing the ",(0,l.kt)("a",{parentName:"p",href:"https://amzn.to/4ho0F91"},"Effective Shell Book")," I still find myself regularly discovering techniques that are huge time-savers. I've called these ",(0,l.kt)("strong",{parentName:"p"},"Effective Shell Snippets")," and will update this page with them from time to time, so check back regularly!"),(0,l.kt)("h3",{id:"git--ai-interactively-staging-changes-summarising-with-ai"},"Git + AI: Interactively Staging Changes, Summarising with AI"),(0,l.kt)("p",null,"A fun snippet I built is the function ",(0,l.kt)("inlineCode",{parentName:"p"},"aigac"),' - this is short for "AI Git Add & Commit". It performs an interactive patch add of changes to the working tree, commits the changes, then uses the ',(0,l.kt)("a",{parentName:"p",href:"https://github.com/dwmkerr/terminal-ai"},"Terminal AI")," tool to create a commit message with a title and description that follows ",(0,l.kt)("a",{parentName:"p",href:"https://www.conventionalcommits.org/en/v1.0.0/"},"conventional commit")," syntax:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Demo",src:t(5416).Z,width:"840",height:"386"})),(0,l.kt)("p",null,"The function looks like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"aigac() {\n  # Add untracked files but none of their content - so that 'git add --patch'\n  # lets us interactively stage new files as well as existing file changes.\n  git add -N .\n  git add --patch\n\n  # If there's no changes, bail.\n  if git diff --cached --quiet; then\n    echo \"No changes staged for commit.\"\n    return 1\n  fi\n\n  # Generate the commit message using terminal-ai. Pipe it into 'git commit'\n  # by using the '-F -' (i.e. read from the stdin file). Make sure we edit it\n  # in the editor first with '-e'.\n  git diff --cached |\\\n    ai -- 'summarise this git diff into a conventional commit, e.g. feat(feature): short description\\n\\nlong description' |\\\n    git commit -e -F - \n}\n")),(0,l.kt)("p",null,"This snippet may change over time - you should be able to find the latest version in my ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/dwmkerr/dotfiles"},(0,l.kt)("inlineCode",{parentName:"a"},"dotfiles")),"."),(0,l.kt)("h3",{id:"open-github-page-for-repo"},"Open GitHub Page for Repo"),(0,l.kt)("p",null,"When I'm working on some code I often have to open its GitHub home page, to check for issues, see the status of pipelines and so on. You can use the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/cli/cli"},(0,l.kt)("inlineCode",{parentName:"a"},"gh"))," CLI for many of these operations, but if I just want to open the webpage, I like use the ",(0,l.kt)("inlineCode",{parentName:"p"},"ghopen")," function:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Demo",src:t(4246).Z,width:"840",height:"386"})),(0,l.kt)("p",null,"This command will open the URL shown in your browser."),(0,l.kt)("p",null,"Here's the code:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="https://github.com/dwmkerr/dotfiles/blob/main/shell.functions.d/ghopen.sh"',title:'"https://github.com/dwmkerr/dotfiles/blob/main/shell.functions.d/ghopen.sh"'},'ghopen() {\n    # Get the origin for the current repo.\n    local origin=$(git remote get-url origin 2> /dev/null)\n\n    # Bail if we\'re not in a github repo.\n    if [[ ($? -ne 0) || ("${origin}" != *github*) ]]; then\n        echo "current dir \'$(basename "${PWD}")\' is not in a github repo..."\n        return\n    fi\n\n    # The origin probably looks like this:\n    # git@github.com:dwmkerr/effective-shell.git\n    # The org/repo is everything after the colon and before \'.git\'.\n    local org_repo=$(echo "${origin%.git}" | cut -f2 -d:)\n    local url="http://github.com/${org_repo}"\n\n    # Let the user know what we\'re opening, formatting org/repo in green, open.\n    echo -e "opening github.com/\\e[32m${org_repo}\\e[0m"\n    python3 -c "import webbrowser; webbrowser.open_new_tab(\'${url}\')"\n}\n')),(0,l.kt)("p",null,"Some useful techniques - all of which are covered in various chapters across the book!"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Stream Redirection: We pipe errors from ",(0,l.kt)("inlineCode",{parentName:"li"},"git")," to ",(0,l.kt)("inlineCode",{parentName:"li"},"/dev/null")," so that we don't spam the user's screen, and check the result of the command with ",(0,l.kt)("inlineCode",{parentName:"li"},"$?")),(0,l.kt)("li",{parentName:"ul"},"Conditionals: The Bash 'if statement' let's us check whether the origin contains the text 'github'"),(0,l.kt)("li",{parentName:"ul"},"Shell Expansion: We can use the ",(0,l.kt)("inlineCode",{parentName:"li"},"${origin%.git}")," brace expansion to remove ",(0,l.kt)("inlineCode",{parentName:"li"},".git")," from the end of a variable"),(0,l.kt)("li",{parentName:"ul"},"Opening a browser with ",(0,l.kt)("inlineCode",{parentName:"li"},"python3")," is more portable than using ",(0,l.kt)("inlineCode",{parentName:"li"},"open")," or similar")))}s.isMDXComponent=!0},5416:(e,i,t)=>{t.d(i,{Z:()=>n});const n=t.p+"assets/images/aigac-40453b4eed9c6bcf8ca96529c07cf097.svg"},4246:(e,i,t)=>{t.d(i,{Z:()=>n});const n="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iODQwIiBoZWlnaHQ9IjM4NS42NSI+PHJlY3Qgd2lkdGg9Ijg0MCIgaGVpZ2h0PSIzODUuNjUiIHJ4PSI1IiByeT0iNSIgY2xhc3M9ImEiLz48c3ZnIHk9IjAlIiB4PSIwJSI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iNiIgZmlsbD0iI2ZmNWY1OCIvPjxjaXJjbGUgY3g9IjQwIiBjeT0iMjAiIHI9IjYiIGZpbGw9IiNmZmJkMmUiLz48Y2lyY2xlIGN4PSI2MCIgY3k9IjIwIiByPSI2IiBmaWxsPSIjMThjMTMyIi8+PC9zdmc+PHN2ZyBoZWlnaHQ9IjMyNS42NSIgdmlld0JveD0iMCAwIDgwIDMyLjU2NSIgd2lkdGg9IjgwMCIgeD0iMTUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHk9IjUwIj48c3R5bGU+QGtleWZyYW1lcyBuezAle3RyYW5zZm9ybTp0cmFuc2xhdGVYKDApfTI2LjMle3RyYW5zZm9ybTp0cmFuc2xhdGVYKC04MHB4KX0yOS40JXt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtMTYwcHgpfTM1LjUle3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0yNDBweCl9NDAuMyV7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTMyMHB4KX00NC4yJXt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNDAwcHgpfTQ3Ljkle3RyYW5zZm9ybTp0cmFuc2xhdGVYKC00ODBweCl9NTUuNyV7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTY0MHB4KX01Ni4zJXt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNzIwcHgpfTYzLjkle3RyYW5zZm9ybTp0cmFuc2xhdGVYKC04MDBweCl9dG97dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTk2MHB4KX19LmF7ZmlsbDojMjgyZDM1fS5pe2ZpbGw6I2RiYWI3OX0uaSwuaiwua3t3aGl0ZS1zcGFjZTpwcmV9Lmp7ZmlsbDojYjliZmNhO2ZvbnQtd2VpZ2h0OjcwMH0ua3tmaWxsOiNiOWMwY2J9PC9zdHlsZT48ZyBmb250LWZhbWlseT0iTW9uYWNvLENvbnNvbGFzLE1lbmxvLCdCaXRzdHJlYW0gVmVyYSBTYW5zIE1vbm8nLCdQb3dlcmxpbmUgU3ltYm9scycsbW9ub3NwYWNlIiBmb250LXNpemU9IjEuNjciPjxkZWZzPjxzeW1ib2wgaWQ9IjEiPjx0ZXh0IHk9IjEuNjciIHN0eWxlPSJ3aGl0ZS1zcGFjZTpwcmUiIGZpbGw9IiM3MWJlZjIiIGZvbnQtd2VpZ2h0PSI3MDAiPmdpdGh1Yi9kd21rZXJyL3Rlcm1pbmFsLWFpPC90ZXh0Pjx0ZXh0IHg9IjI3LjA1NCIgeT0iMS42NyIgc3R5bGU9IndoaXRlLXNwYWNlOnByZSIgZmlsbD0iI2E4Y2M4YyIgdGV4dC1kZWNvcmF0aW9uPSJ1bmRlcmxpbmUiPm1haW48L3RleHQ+PHRleHQgeD0iMzIuMDY0IiB5PSIxLjY3IiBzdHlsZT0id2hpdGUtc3BhY2U6cHJlIiBmaWxsPSIjZTg4Mzg4Ij4hPC90ZXh0Pjx0ZXh0IHg9IjM0LjA2OCIgeT0iMS42NyIgY2xhc3M9ImkiPjE8L3RleHQ+PHRleHQgeD0iMzYuMDcyIiB5PSIxLjY3IiBjbGFzcz0iaSI+aW48L3RleHQ+PHRleHQgeD0iMzkuMDc4IiB5PSIxLjY3IiBjbGFzcz0iaSI+c3Rhc2g8L3RleHQ+PC9zeW1ib2w+PHN5bWJvbCBpZD0iMiI+PHRleHQgeT0iMS42NyIgY2xhc3M9ImoiPiQ8L3RleHQ+PC9zeW1ib2w+PHN5bWJvbCBpZD0iMyI+PHRleHQgeT0iMS42NyIgY2xhc3M9ImoiPiQ8L3RleHQ+PHRleHQgeD0iMi4wMDQiIHk9IjEuNjciIGNsYXNzPSJrIj5naG9wZW48L3RleHQ+PC9zeW1ib2w+PHN5bWJvbCBpZD0iNCI+PHRleHQgeT0iMS42NyIgY2xhc3M9ImsiPm9wZW5pbmc8L3RleHQ+PHRleHQgeD0iOC4wMTYiIHk9IjEuNjciIGNsYXNzPSJrIj5naXRodWIuY29tLzwvdGV4dD48dGV4dCB4PSIxOS4wMzgiIHk9IjEuNjciIHN0eWxlPSJ3aGl0ZS1zcGFjZTpwcmUiIGZpbGw9IiNhOGNjOGMiPmR3bWtlcnIvdGVybWluYWwtYWk8L3RleHQ+PC9zeW1ib2w+PHN5bWJvbCBpZD0iYSI+PHBhdGggZmlsbD0idHJhbnNwYXJlbnQiIGQ9Ik0wIDBoODB2MTVIMHoiLz48L3N5bWJvbD48L2RlZnM+PHBhdGggY2xhc3M9ImEiIGQ9Ik0wIDBoODB2MzIuNTY1SDB6Ii8+PGcgc3R5bGU9ImFuaW1hdGlvbi1kdXJhdGlvbjo0LjAyMTcxczthbmltYXRpb24taXRlcmF0aW9uLWNvdW50OmluZmluaXRlO2FuaW1hdGlvbi1uYW1lOm47YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpzdGVwcygxLGVuZCkiPjxzdmcgd2lkdGg9IjEwNDAiPjxzdmc+PHVzZSB4bGluazpocmVmPSIjYSIvPjx1c2UgeGxpbms6aHJlZj0iIzEiIHk9IjIuMTcxIi8+PHVzZSB4bGluazpocmVmPSIjMiIgeT0iNC4zNDIiLz48L3N2Zz48c3ZnIHg9IjgwIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSB4bGluazpocmVmPSIjMSIgeT0iMi4xNzEiLz48dGV4dCB5PSI2LjAxMiIgY2xhc3M9ImoiPiQ8L3RleHQ+PHRleHQgeD0iMi4wMDQiIHk9IjYuMDEyIiBjbGFzcz0iayI+ZzwvdGV4dD48L3N2Zz48c3ZnIHg9IjE2MCI+PHVzZSB4bGluazpocmVmPSIjYSIvPjx1c2UgeGxpbms6aHJlZj0iIzEiIHk9IjIuMTcxIi8+PHRleHQgeT0iNi4wMTIiIGNsYXNzPSJqIj4kPC90ZXh0Pjx0ZXh0IHg9IjIuMDA0IiB5PSI2LjAxMiIgY2xhc3M9ImsiPmdoPC90ZXh0Pjwvc3ZnPjxzdmcgeD0iMjQwIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSB4bGluazpocmVmPSIjMSIgeT0iMi4xNzEiLz48dGV4dCB5PSI2LjAxMiIgY2xhc3M9ImoiPiQ8L3RleHQ+PHRleHQgeD0iMi4wMDQiIHk9IjYuMDEyIiBjbGFzcz0iayI+Z2hvPC90ZXh0Pjwvc3ZnPjxzdmcgeD0iMzIwIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSB4bGluazpocmVmPSIjMSIgeT0iMi4xNzEiLz48dGV4dCB5PSI2LjAxMiIgY2xhc3M9ImoiPiQ8L3RleHQ+PHRleHQgeD0iMi4wMDQiIHk9IjYuMDEyIiBjbGFzcz0iayI+Z2hvcDwvdGV4dD48L3N2Zz48c3ZnIHg9IjQwMCI+PHVzZSB4bGluazpocmVmPSIjYSIvPjx1c2UgeGxpbms6aHJlZj0iIzEiIHk9IjIuMTcxIi8+PHRleHQgeT0iNi4wMTIiIGNsYXNzPSJqIj4kPC90ZXh0Pjx0ZXh0IHg9IjIuMDA0IiB5PSI2LjAxMiIgY2xhc3M9ImsiPmdob3BlPC90ZXh0Pjwvc3ZnPjxzdmcgeD0iNDgwIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSB4bGluazpocmVmPSIjMSIgeT0iMi4xNzEiLz48dXNlIHhsaW5rOmhyZWY9IiMzIiB5PSI0LjM0MiIvPjwvc3ZnPjxzdmcgeD0iNTYwIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSB4bGluazpocmVmPSIjMSIgeT0iMi4xNzEiLz48dXNlIHhsaW5rOmhyZWY9IiMzIiB5PSI0LjM0MiIvPjwvc3ZnPjxzdmcgeD0iNjQwIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSB4bGluazpocmVmPSIjMSIgeT0iMi4xNzEiLz48dXNlIHhsaW5rOmhyZWY9IiMzIiB5PSI0LjM0MiIvPjwvc3ZnPjxzdmcgeD0iNzIwIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSB4bGluazpocmVmPSIjMSIgeT0iMi4xNzEiLz48dXNlIHhsaW5rOmhyZWY9IiMzIiB5PSI0LjM0MiIvPjx1c2UgeGxpbms6aHJlZj0iIzQiIHk9IjYuNTEzIi8+PC9zdmc+PHN2ZyB4PSI4MDAiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48dXNlIHhsaW5rOmhyZWY9IiMxIiB5PSIyLjE3MSIvPjx1c2UgeGxpbms6aHJlZj0iIzMiIHk9IjQuMzQyIi8+PHVzZSB4bGluazpocmVmPSIjNCIgeT0iNi41MTMiLz48dXNlIHhsaW5rOmhyZWY9IiMxIiB5PSIxMC44NTUiLz48dXNlIHhsaW5rOmhyZWY9IiMyIiB5PSIxMy4wMjYiLz48L3N2Zz48c3ZnIHg9Ijg4MCI+PHVzZSB4bGluazpocmVmPSIjYSIvPjx1c2UgeGxpbms6aHJlZj0iIzEiIHk9IjIuMTcxIi8+PHVzZSB4bGluazpocmVmPSIjMyIgeT0iNC4zNDIiLz48dXNlIHhsaW5rOmhyZWY9IiM0IiB5PSI2LjUxMyIvPjx1c2UgeGxpbms6aHJlZj0iIzEiIHk9IjEwLjg1NSIvPjx1c2UgeGxpbms6aHJlZj0iIzIiIHk9IjEzLjAyNiIvPjwvc3ZnPjxzdmcgeD0iOTYwIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PHVzZSB4bGluazpocmVmPSIjMSIgeT0iMi4xNzEiLz48dXNlIHhsaW5rOmhyZWY9IiMzIiB5PSI0LjM0MiIvPjx1c2UgeGxpbms6aHJlZj0iIzQiIHk9IjYuNTEzIi8+PHVzZSB4bGluazpocmVmPSIjMSIgeT0iMTAuODU1Ii8+PHVzZSB4bGluazpocmVmPSIjMiIgeT0iMTMuMDI2Ii8+PHRleHQgeT0iMTYuODY3IiBjbGFzcz0iayI+ZXhpdDwvdGV4dD48L3N2Zz48L3N2Zz48L2c+PC9nPjwvc3ZnPjwvc3ZnPg=="}}]);