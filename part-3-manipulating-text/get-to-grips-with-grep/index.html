<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-manipulating-text/get-to-grips-with-grep/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Get to Grips with Grep | Effective Shell</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://effective-shell.com/part-3-manipulating-text/get-to-grips-with-grep/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="google-site-verification" content="ca-pub-6181461532532600"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Get to Grips with Grep | Effective Shell"><meta data-rh="true" name="description" content="The grep tool is a real workhorse for shell users - once you&#x27;ve learned how to use it you will find yourself using it again and again. In this chapter we&#x27;ll see how you can use grep for common tasks, and how to use it in combination with other tools."><meta data-rh="true" property="og:description" content="The grep tool is a real workhorse for shell users - once you&#x27;ve learned how to use it you will find yourself using it again and again. In this chapter we&#x27;ll see how you can use grep for common tasks, and how to use it in combination with other tools."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://effective-shell.com/part-3-manipulating-text/get-to-grips-with-grep/"><link data-rh="true" rel="alternate" href="https://effective-shell.com/part-3-manipulating-text/get-to-grips-with-grep/" hreflang="en"><link data-rh="true" rel="alternate" href="https://effective-shell.com/part-3-manipulating-text/get-to-grips-with-grep/" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HZFMZV9Z4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-8HZFMZV9Z4",{anonymize_ip:!0})</script>


<script src="https://cdn.jsdelivr.net/npm/docusaurus-plugin-drawio/viewer.min.js"></script>


<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6181461532532600" async></script>
<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6181461532532600" async></script><link rel="stylesheet" href="/assets/css/styles.48f2a3b2.css">
<link rel="preload" href="/assets/js/runtime~main.ffe37591.js" as="script">
<link rel="preload" href="/assets/js/main.2bfa30b0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Effective Shell Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Effective Shell Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Effective Shell</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sponsors/dwmkerr?frequency=one-time&amp;sponsor=dwmkerr" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Buy me a Coffee!<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://amzn.to/4ho0F91" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Buy the Book on Amazon!<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/dwmkerr/terminal-ai" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Terminal AI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://hacker-laws.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Hacker Laws<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div><a href="https://github.com/dwmkerr/effective-shell/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-1-transitioning-to-the-shell/">Transitioning to the Shell</a><button aria-label="Toggle the collapsible sidebar category &#x27;Transitioning to the Shell&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-2-core-skill/">Core Skills</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core Skills&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/part-3-manipulating-text/">Manipulating Text and Streams</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manipulating Text and Streams&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-3-manipulating-text/regex-essentials/">Regex Essentials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/part-3-manipulating-text/get-to-grips-with-grep/">Get to Grips with Grep</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-3-manipulating-text/slice-and-dice-text/">Slice and Dice Text</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-3-manipulating-text/advanced-text-manipulation/">Advanced Text Manipulation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-3-manipulating-text/build-commands-on-the-fly/">Build Commands on the Fly</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-4-shell-scripting/">Shell Scripting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Shell Scripting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-5-building-your-toolkit/">Building Your Toolkit</a><button aria-label="Toggle the collapsible sidebar category &#x27;Building Your Toolkit&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-6-advanced-techniques/">Advanced Techniques</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced Techniques&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/xx-appendices/installing-samples/">Appendices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zz-developer-guide/components">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menuHtmlItem_M9Kj menu__list-item"><amazonbookpreview title="Effective Shell" imageurl="https://m.media-amazon.com/images/I/71xI0lAzRzL._SL1500_.jpg" affiliatelink="https://amzn.to/4ho0F91"> </li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Get to Grips with Grep</h1></header><p>The <code>grep</code> tool is a real workhorse for shell users - once you&#x27;ve learned how to use it you will find yourself using it again and again. In this chapter we&#x27;ll see how you can use <code>grep</code> for common tasks, and how to use it in combination with other tools.</p><p>As with the other tools we&#x27;ll introduce in this chapter, we&#x27;ll also look at when <code>grep</code> is the right tool for the job and when we should consider other options.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-grep">What is Grep<a class="hash-link" href="#what-is-grep" title="Direct link to heading">​</a></h2><p>A quick check of the manual page for <code>grep</code> gives an overview:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ man grep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GREP(1)                   BSD General Commands Manual                  GREP(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     grep, egrep, fgrep, zgrep, zegrep, zfgrep -- file pattern searcher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SYNOPSIS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     grep [-abcdDEFGHhIiJLlmnOopqRSsUVvwxZ] [-A num] [-B num] [-C[num]] [-e pattern] [-f file]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          [--binary-files=value] [--color[=when]] [--colour[=when]] [--context[=num]] [--label]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          [--line-buffered] [--null] [pattern] [file ...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DESCRIPTION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     The grep utility searches any given input files, selecting lines that match one or more</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     patterns.  By default, a pattern matches an input line if the regular expression (RE) in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     the pattern matches the input line without its trailing newline.  An empty expression</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     matches every line.  Each input line that matches at least one of the patterns is written</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     to the standard output.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Wow. Lots of options for this command. And confusingly, lots of alternative forms as well (such as <code>egrep</code>, <code>zgrep</code> and so on). </p><p>Maybe the <code>tldr</code> tool will provide a more concise overview?</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ tldr grep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  grep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Matches patterns in input text.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Supports simple patterns and regular expressions.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>That is indeed a little more concise. By the way, if you are not familiar with how you can get help on commands, check out <a href="/part-1-transitioning-to-the-shell/getting-help/">Chapter 5 - Getting Help</a>. As the manual pages indicate, <code>grep</code> is used to match patterns in files. More advanced users will most likely know exactly what this means, but a more simple description is just:</p><blockquote><p>Grep lets you search for text or filter text.</p></blockquote><p>That&#x27;s it. You can search in files, but you are not <em>limited</em> to searching in files. And you can search for <em>literal</em> text, such as the word &#x27;error&#x27;, or you can search for <em>patterns</em>. <em>Patterns</em> in this case means <em>regular expressions</em> - expressions which allow you to be more specific in how you search (such as looking for a set of 16 numbers in a row, like a credit card number, or any text which looks like an email address). You can also do the opposite - filtering out parts of text.</p><p>We&#x27;ll use <code>grep</code> to search through text. Let&#x27;s get straight into it!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-grep">Why Grep?<a class="hash-link" href="#why-grep" title="Direct link to heading">​</a></h2><p>Why the odd name? Grep is such a commonly used tool that the name has become a verb amongst technologists (people will often suggest you <em>grep</em> for something in files).</p><p>The name comes from a command which was used in the original <code>ed</code> text editor - the command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">g/re/p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command ran on all lines (<code>g</code>, for <em>global</em>), applied a regular expression (<code>re</code>, for <em>regular expression</em>) and then printed (<code>p</code> for <em>print</em>) the results. A colleague of Ken Thompson, one of the early innovators and inventors in the Unix world, needed to edit a large file - a file which was too large to fit in <code>ed</code>. Ken wrote the <code>grep</code> program overnight to allow the file&#x27;s text to be filtered - and the results passed to the <code>ed</code> editor!</p><p>You can read more about this story and some of the fascinating history of the early days of Unix in a <a href="https://www.youtube.com/watch?v=NTfOnGZUZDk&amp;feature=emb_title" target="_blank" rel="noopener noreferrer">great interview with Brian Kerninghan</a> from Computerphile<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="searching-through-text">Searching Through Text<a class="hash-link" href="#searching-through-text" title="Direct link to heading">​</a></h2><p>If you&#x27;ve been working through this book, you&#x27;ve probably entered quite a few commands in the shell. Most shells keep a history of the commands you type. Under the hood, when you use the up and down keys to look through commands you entered earlier, or use the <code>Ctrl-R</code> shortcut to <em>search</em> through earlier commands, your shell is looking through this file. If these tricks are not familiar, check <a href="/part-2-core-skills/fly-on-the-command-line">Chapter 9 - Fly on the Command Line</a>.</p><p>The file which keeps the history can vary from shell to shell. For example, on my system, my history for Bash is in the file <code>~/.bash_history</code>. But most &#x27;Bash-like&#x27; shells provide a built-in environment variable which let&#x27;s you find the path of the shell history. Let&#x27;s at this file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat $HISTFILE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat ~/.ssh/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh bastion.cloudops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">help echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">help cd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This file will generally contain a list of the commands that the logged in user has entered in their shell. This file will likely be huge. Let&#x27;s search through it using <code>grep</code>! Here&#x27;s how we can use the <code>grep</code> command to search for lines which contain the text <code>man</code>:</p><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv">grep man $HISTFILE<!-- -->
<!-- -->
<!-- -->...<!-- -->
<strong>man</strong> socket<!-- -->
<!-- -->k describe services eventstoredb-http-<strong>man</strong>agement<!-- -->
<strong>man</strong> cal<!-- -->
<!-- -->gcb refactor/perfor<strong>man</strong>ce/standardise-eventstore<!-- -->
<!-- -->vi src/tests/handlers/test_com<strong>man</strong>d_handlers.py<!-- -->
<!-- -->gco src/handlers/com<strong>man</strong>d_handlers.py<!-- -->
<!-- -->gcb feat/perfor<strong>man</strong>ce/use-eventstore-writer<!-- -->
<!-- -->nvim perfor<strong>man</strong>ce.md<!-- -->
<strong>man</strong> grep<!-- -->
</code></pre><p>Here I can see all of the commands I have recently entered which have the text <code>man</code> in them. Note that the text which matches is highlighted and shown in bold.</p><p>Now what if you use a different shell, or forget where the history file lives? A nice trick here is to use the <code>history</code> command. This command prints out the history, as well as the line number. The <code>history</code> command writes to <code>stdout</code>. If we don&#x27;t give <code>grep</code> a source file, it will simply search through <code>stdin</code>. Just as we learnt in <a href="/part-2-core-skills/thinking-in-pipelines/">Chapter 7 - Thinking in Pipelines</a> this means we can just <code>grep</code> the output of the <code>history</code> command!</p><p>Here&#x27;s how that would work:</p><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv">history | grep man<!-- -->
<!-- -->
<!-- -->...<!-- -->
<!-- -->9125  <strong>man</strong> socket<!-- -->
<!-- -->9188  k describe services eventstoredb-http-<strong>man</strong>agement<!-- -->
<!-- -->9211  <strong>man</strong> cal<!-- -->
<!-- -->9341  gcb refactor/perfor<strong>man</strong>ce/standardise-eventstore<!-- -->
<!-- -->9344  vi src/tests/handlers/test_com<strong>man</strong>d_handlers.py<!-- -->
<!-- -->9347  gco src/handlers/com<strong>man</strong>d_handlers.py<!-- -->
<!-- -->9352  gcb feat/perfor<strong>man</strong>ce/use-eventstore-writer<!-- -->
<!-- -->9355  nvim perfor<strong>man</strong>ce.md<!-- -->
<!-- -->10002  <strong>man</strong> grep<!-- -->
</code></pre><p>This is easier to remember! There&#x27;s one more cool trick - if we just type in the exclamation point symbol followed by any line number shown above, we repeat the command! For example, typing in:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!9355</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Would repeat line <code>9355</code> of the history (which is <code>nvim performance.md</code>).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-patterns">Using Patterns<a class="hash-link" href="#using-patterns" title="Direct link to heading">​</a></h2><p>Now as you can see from the output above, when we searched through my history, we didn&#x27;t just find times I executed the <code>man</code> command - we found <em>any</em> line which has the characters <code>man</code> in it. What about if we only wanted to find the lines which start with <code>man</code>?</p><p>To perform a search like this, we can use a <em>regular expression</em>. Here&#x27;s how it would work:</p><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv">history | grep &quot;[0-9]\+  man&quot;<!-- -->
<!-- -->
<!-- -->...<!-- -->
<strong>9125  man</strong> socket<!-- -->
<strong>9211  man</strong> cal<!-- -->
<strong>10002  man</strong> grep<!-- -->
</code></pre><p>Let&#x27;s break this down. In this search, we are using a <em>pattern</em> to search for text. The pattern in this case is a <em>basic regular expression</em>. Regular expressions allow us to use some clever constructs to search for text. The expression we&#x27;ve used is made up of the following components:</p><ul><li><code>[0-9]\+</code> At least one number - any character in the range zero to nine.</li><li><code>  man</code> The literal text written, i.e. two spaces and the letters <code>man</code>.</li></ul><p>Now for anyone who is familiar with regular expressions, you might wonder why we have a slash before the <code>+</code> symbol, when the <code>+</code> symbol has a specific meaning in regular expressions (it means &#x27;at least one of the previous characters). The reason we have a leading slash is that by default <code>grep</code> is using <em>basic regular expressions</em>. In general, this will be less familiar for users and will be different to what they are used to from different tools.</p><p>To make regular expressions more &#x27;standard&#x27;, we can use the <code>-E</code> flag to tell <code>grep</code> to use <em>Extended Regular Expressions</em>. We can also use the <code>egrep</code> tool, which assumes the pattern will be an extended regular expression. Using either approach will work, and allow you to re-write the pattern as below:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">history | grep -E &quot;[0-9]+  man&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...or...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">history | egrep &quot;[0-9]+  man&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is just a little hint of the power of regular expressions. They can be daunting at first, and many people never become comfortable with them, but I would strongly encourage you to start exploring them.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Getting Help on Regular Expressions</div><div class="admonitionContent_S0QG"><p>If you want to find out more about the difference between the slightly old-fashioned <em>basic</em> regular expressions and modern regular expressions, you can use:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">man re_format</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This manpage gives lots of information on regular expressions, including the differences between basic and extended patterns.</p></div></div><p>If you ever want to see how a regular expression works, try using the website <a href="https://regex101.com" target="_blank" rel="noopener noreferrer">regex101.com</a>. It let&#x27;s you test out regular expressions and also describes exactly how they work. For example, if I enter the regular expression we just used I&#x27;ll see this:</p><img loading="lazy" src="/assets/images/regex101-fea6481d5879238fd6a0ea825fef8eb1.png" width="800px" alt="Screenshot of the &#x27;regex101&#x27; website" class="img_ev3q"><p>We&#x27;re going to see more about regular expressions as we go through the book.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="finding-problems">Finding Problems<a class="hash-link" href="#finding-problems" title="Direct link to heading">​</a></h2><p>If there&#x27;s one command I use a lot, it&#x27;s this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">grep -i err</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>-i</code> flag makes the search case-insensitive. This makes this a very quick way to scan through a file for any text which matches the letters <code>err</code> - making it a very quick way to find <em>errors</em> in log files.</p><p>You can try this out by using some of the log files in the <code>logs</code> folder of the samples. Here&#x27;s how you can try it out:</p><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv">grep -i err ~/effective-shell/logs/web-server-logs.txt<!-- -->
<!-- -->
<!-- -->...<!-- -->
<!-- -->2020-11-29T12:50:30.594Z: info - Serving file &#x27;../../../website/public/docs/part-2-core-skills/7-thinking-in-pipelines/images/diagram-std<strong>err</strong>-redirect.png&#x27;...<!-- -->
<!-- -->2020-11-29T12:50:31.827Z: <strong>err</strong>or - Unhandled <strong>err</strong>or EACCES trying to read &#x27;../../../website/public/svg/calendar.svg&#x27;, returning a 500<!-- -->
<!-- -->2020-11-29T12:50:31.827Z: <strong>err</strong>or - Unhandled <strong>err</strong>or EACCES trying to read &#x27;../../../website/public/svg/calendar.svg&#x27;, returning a 500<!-- -->
<!-- -->2020-11-29T12:50:31.827Z: <strong>err</strong>or - Unhandled <strong>err</strong>or EACCES trying to read &#x27;../../../website/public/svg/calendar.svg&#x27;, returning a 500<!-- -->
<!-- -->2020-11-29T12:50:31.848Z: <strong>err</strong>or - Unhandled <strong>err</strong>or EACCES trying to read &#x27;../../../website/public/svg/edit.svg&#x27;, returning a 500<!-- -->
<!-- -->2020-11-29T12:50:31.849Z: <strong>err</strong>or - Unhandled <strong>err</strong>or EACCES trying to read &#x27;../../../website/public/svg/edit.svg&#x27;, returning a 500<!-- -->
</code></pre><p>This is a very useful trick. You could use this technique to search for warnings, problems, specific messages and so on.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-abc-of-grep">The ABC of Grep<a class="hash-link" href="#the-abc-of-grep" title="Direct link to heading">​</a></h2><p>There are three <em>really</em> useful parameters for <code>grep</code>, which I used to struggle to remember, until I realised that they are simple - ABC!</p><p>Here&#x27;s how they work:</p><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv">$ grep host -A 3 ./programs/web-server/web-server.js<!-- -->
<!-- -->
<strong>host</strong>: process.env.HOST || &#x27;local<strong>host</strong>&#x27;,<!-- -->
<!-- -->port: process.env.PORT || getOptonalEnvInt(&#x27;PORT&#x27;, 8080),<!-- -->
<!-- -->root: process.env.ROOT || process.cwd(),<!-- -->
<!-- -->defaultPage: &#x27;index.html&#x27;,<!-- -->
<!-- -->--<!-- -->
<!-- -->httpServer.listen(<!-- -->{<strong>host</strong>: config.<strong>host</strong>, port: config.port &amp;brace;);<!-- -->
<!-- -->log.info(`Server running on: $<!-- -->{<!-- -->config.<strong>host</strong>}<!-- -->:$<!-- -->{<!-- -->config.port<!-- -->}<!-- -->`);<!-- -->
<!-- -->}<!-- -->
<!-- -->main();<!-- -->
</code></pre><p><code>A</code> stands for <em>after</em>. In this example we show the three lines after each occurrence of the work <code>host</code> in the <code>web-server.js</code> script. This is a quick way to see how something you search for might be used!</p><p><code>B</code> stands for <em>before</em> - we can use this to see what comes <em>before</em> a match when we&#x27;re searching. What can lead to us sending an error in our web server? Let&#x27;s see:</p><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv">$ grep throw -B 5 ./programs/web-server/web-server.js<!-- -->
<!-- -->
<!-- -->//  Helper to return an optional numeric environment variable or the default.<!-- -->
<!-- -->function getOptonalEnvInt(name, defaultValue) <!-- -->{<!-- -->
<!-- -->const val = process.env[name];<!-- -->
<!-- -->if (!val) return defaultValue;<!-- -->
<!-- -->const intVal = parseInt(val, 10);<!-- -->
<!-- -->if (isNaN(intVal)) <strong>throw</strong> new Error(`Unable to parse environment variable named &#x27;$<!-- -->{<!-- -->name<!-- -->}<!-- -->&#x27; with value &#x27;$<!-- -->{<!-- -->val<!-- -->}<!-- -->&#x27; into an integer`);<!-- -->
</code></pre><p>And finally <code>C</code>, the most useful of them all. <code>C</code> stands for <em>context</em>, and lets you see a number of lines <em>before and after</em> each match. What was I up to the last time I ran the <code>git init</code> command? Let&#x27;s see!</p><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv">$ history | grep -C 5 &#x27;git init&#x27;<!-- -->
<!-- -->
<!-- -->5802  git push --follow-tags &amp;&amp; git push origin<!-- -->
<!-- -->5803  cd ../java-maven-standard-version-sample<!-- -->
<!-- -->5804  rm -rg .git<!-- -->
<!-- -->5805  rm -rf git<!-- -->
<!-- -->5806  rm -rf .idea<!-- -->
<!-- -->5807  <strong>git init</strong> -h<!-- -->
<!-- -->5808  git remote add origin git@github.com:dwmkerr/java-maven-standard-version-sample.git<!-- -->
<!-- -->5809  git push origin -u<!-- -->
<!-- -->5810  git push -u origin<!-- -->
<!-- -->5811  git push --set-upstream origin master<!-- -->
<!-- -->5812  git rm --cached tpm<!-- -->
</code></pre><p>Don&#x27;t forget that these flags need to be capitalised! These three flags are <em>very</em> useful - knowing how to find context of a match can be a lifesaver when quickly searching through text.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="working-with-multiple-files">Working with Multiple Files<a class="hash-link" href="#working-with-multiple-files" title="Direct link to heading">​</a></h2><p>What about if you have a bunch of files you want to search? One problem we have at the moment is that everything we search through has been a single file. But if we are searching through multiple files, how can we identify where the matches come from?</p><p>There&#x27;s a useful pair of flags for this. <code>-H</code> stands for &#x27;header&#x27;, which shows the file name before each match. <code>-n</code> stands for &#x27;number&#x27;, which makes sure the line number is shown. Here&#x27;s how we might use this command:</p><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv">$ grep -Hn ERROR ./logs/apm-logs/*.logs<!-- -->
<!-- -->
<!-- -->...<!-- -->
<!-- -->./logs/apm-logs/apm02.logs:34893:2020-11-27T12:24:37.429Z       <strong>ERROR</strong>   [request]       middleware/log_middleware.go:95unauthorized     <!-- -->{<!-- -->&quot;request_id&quot;: &quot;53a41a98-ba12-454e-aadf-72c97dc40e96&quot;, &quot;method&quot;: &quot;POST&quot;, &quot;URL&quot;: &quot;/config/v1/agents&quot;, &quot;content_length&quot;: 27, &quot;remote_address&quot;: &quot;127.0.0.1&quot;, &quot;user-agent&quot;: &quot;elasticapm-python/5.9.0&quot;, &quot;response_code&quot;: 401, &quot;error&quot;: &quot;unauthorized&quot;<!-- -->}<!-- -->
<!-- -->./logs/apm-logs/apm02.logs:34906:2020-11-27T12:25:11.415Z       <strong>ERROR</strong>   [request]       middleware/log_middleware.go:95unauthorized     <!-- -->{<!-- -->&quot;request_id&quot;: &quot;a49d5546-b8d2-4e50-9dd0-6cbf419a365e&quot;, &quot;method&quot;: &quot;POST&quot;, &quot;URL&quot;: &quot;/config/v1/agents&quot;, &quot;content_length&quot;: 27, &quot;remote_address&quot;: &quot;127.0.0.1&quot;, &quot;user-agent&quot;: &quot;elasticapm-python/5.9.0&quot;, &quot;response_code&quot;: 401, &quot;error&quot;: &quot;unauthorized&quot;<!-- -->}<!-- -->
</code></pre><p>Note that in this case we searched through many files - anything which matches the <code>*.logs</code> wildcard. To help us identify in <em>which</em> file the match was found, we used the <code>-Hn</code> flags. The beginning of the lines now start with the path of the file and the line number, for example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./logs/apm-logs/apm02.logs:34906</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can take this even further:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ grep -R -Hn -i error ./logs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Adding the <code>-R</code> or <em>recursive</em> flag tells <code>grep</code> to search recursively in folders if they are included in the search.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v-for-invert">V for Invert<a class="hash-link" href="#v-for-invert" title="Direct link to heading">​</a></h2><p>As long as your remember that <code>-i</code> is the flag for <em>case insensitive</em>, it makes it a little easier to remember <em>v for invert</em>. This tells <code>grep</code> to <em>exclude</em> lines which match the pattern. This works kind of like a filter.</p><p>Here&#x27;s how I could look through my log files, excluding any messages with &#x27;debug&#x27; in them:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ grep -v debug ./logs/web-server.logs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Don&#x27;t forget, you can always <em>pipe</em> a series of <code>grep</code> commands together. Rather than trying to work out a perfect pattern which searches for exactly what you want, you could just pipe a a set of commands together:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ grep -i error -R ./logs | grep -i -v memory | grep -i -v &#x27;not found&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This set of small, simple, commands is chained together to make a more sophisticated operation:</p><ul><li>First we recursively search for any <code>error</code> text in the <code>./logs</code> folder</li><li>Then we exclude anything which matches <code>memory</code></li><li>Then we exclude anything which matches <code>not found</code></li></ul><p>This is the essence of the Unix Philosophy - with a small number of simple tools, we can <em>compose</em> a more complex workflow!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dont-forget-your-pipelines">Don&#x27;t Forget Your Pipelines!<a class="hash-link" href="#dont-forget-your-pipelines" title="Direct link to heading">​</a></h2><p>We&#x27;ve introduced a very powerful command in this chapter. For familiar users, <code>grep</code> becomes a <em>verb</em> they use regularly - you <code>grep</code> the output of something, or might be <em>grepping</em> to find something. Remember that <code>grep</code>, just like most of the tools in this section, works on <code>stdin</code> by default. So you can easily <code>grep</code> the output of almost anything!</p><p>Here are a few simple examples just to show you how easy it is to perform more complex tasks with grep.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ps -a | grep vim</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Show all processes, then filter the list down to only <code>vim</code> processes.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">grep -Hn -C 3 -R password ./k8s/**/*.yaml | less</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Search through all of the <code>yaml</code> files in my <code>k8s</code> folder, for the text &#x27;password&#x27;, show three lines of context, as well as the file name and number, and put the output in my pager so that it is easy to search through.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ls -al /usr/bin /bin /usr/local/bin | grep zip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Search through all of my installed programs for programs which have <code>zip</code> in the name.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">history | grep grep | tail -n 10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Show me the last ten <code>grep</code> commands I typed in my shell!</p><p>We&#x27;ll see a lot more examples as we go through the book - just remember that <code>grep</code> is always available to search or filter text!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="alternatives-to-grep">Alternatives to Grep<a class="hash-link" href="#alternatives-to-grep" title="Direct link to heading">​</a></h2><p>Grep is a very commonly used tool and has been around for a long time. It can vary a bit from system to system. Over the years a number of alternatives have been developed. Most of these alternatives are either designed to be <em>faster</em>, so that you can search through files much more quickly, or <em>easier</em> so that you don&#x27;t have to remember too many flags.</p><p>In general, I would advise <em>against</em> using alternatives - until you genuinely find you are limited by <code>grep</code>. Every alternative is another tool to learn, which might not be present on other systems you use. It is also less likely to be available if you are writing scripts or instructions for others.</p><p>If you find yourself really struggling with performance - perhaps you often search huge folders of text or if you find yourself regularly struggling to find ways to craft your search patterns, then perhaps you can investigate some of the popular alternatives. But I would suggest that you master the core <code>grep</code> functionality first, before installing other tools.</p><p>If you <em>do</em> decide you want to add some more text searching tools to your toolkit, I would suggest <code>ripgrep</code>, <code>ag</code> and <code>ack</code> as three potential options. Each of them offer performance improvements and additional functionality.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">​</a></h2><p>Grep is a simple text-based search tool! If you need to <em>find</em> text, or want to <em>filter</em> text, then <code>grep</code> should be your go-to tool.</p><p>Here&#x27;s a summary of what we&#x27;ve covered:</p><ul><li><code>grep pattern file</code> searches <code>file</code> for the text <code>pattern</code></li><li>the <code>-E</code> flag lets you use <em>regular expressions</em> for more sophisticated searches</li><li>You can make the search case insensitive with the <code>-i</code> flag</li><li>Remember the <code>ABC</code> flags - <em>after</em>, <em>before</em> and <em>context</em>, which show lines after, before and around the matches</li><li>Include the filename and line number with the <code>-Hn</code> flags</li><li>V for invert! Use the <code>-v</code> flag to invert the search, or filter out matches</li><li><code>grep</code> works great in pipelines! Use it to search or filter when working with <em>other</em> commands</li></ul><div class="footnotes"><hr><ol><li id="fn-1">See the interview at: <a href="https://www.youtube.com/watch?v=NTfOnGZUZDk&amp;feature=emb_title" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=NTfOnGZUZDk&amp;feature=emb_title</a><a href="#fnref-1" class="footnote-backref">↩</a></li></ol></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/dwmkerr/effective-shell/edit/main/docs/03-manipulating-text/14-get-to-grips-with-grep/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/part-3-manipulating-text/regex-essentials/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Regex Essentials</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/part-3-manipulating-text/slice-and-dice-text/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Slice and Dice Text</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-grep" class="table-of-contents__link toc-highlight">What is Grep</a></li><li><a href="#why-grep" class="table-of-contents__link toc-highlight">Why Grep?</a></li><li><a href="#searching-through-text" class="table-of-contents__link toc-highlight">Searching Through Text</a></li><li><a href="#using-patterns" class="table-of-contents__link toc-highlight">Using Patterns</a></li><li><a href="#finding-problems" class="table-of-contents__link toc-highlight">Finding Problems</a></li><li><a href="#the-abc-of-grep" class="table-of-contents__link toc-highlight">The ABC of Grep</a></li><li><a href="#working-with-multiple-files" class="table-of-contents__link toc-highlight">Working with Multiple Files</a></li><li><a href="#v-for-invert" class="table-of-contents__link toc-highlight">V for Invert</a></li><li><a href="#dont-forget-your-pipelines" class="table-of-contents__link toc-highlight">Don&#39;t Forget Your Pipelines!</a></li><li><a href="#alternatives-to-grep" class="table-of-contents__link toc-highlight">Alternatives to Grep</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Effective Shell</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a href="https://amzn.to/4ho0F91" target="_blank" rel="noopener noreferrer" class="footer__link-item" position="right">Buy the Book on Amazon!<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/sponsors/dwmkerr?frequency=one-time&amp;sponsor=dwmkerr" target="_blank" rel="noopener noreferrer" class="footer__link-item" position="right">Buy me a Coffee!<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Other Projects</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/dwmkerr/terminal-ai" target="_blank" rel="noopener noreferrer" class="footer__link-item" position="right">Terminal AI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://hacker-laws.com" target="_blank" rel="noopener noreferrer" class="footer__link-item" position="right">Hacker Laws<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/dwmkerr/effective-shell" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/dwmkerr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Effective Shell v0.36.0. Copyright © 2025 Dave Kerr. Website built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ffe37591.js"></script>
<script src="/assets/js/main.2bfa30b0.js"></script>
</body>
</html>