<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-building-your-toolkit/customising-your-command-prompt/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Customising Your Command Prompt | Effective Shell</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://effective-shell.com/part-5-building-your-toolkit/customising-your-command-prompt"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="google-site-verification" content="ca-pub-6181461532532600"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Customising Your Command Prompt | Effective Shell"><meta data-rh="true" name="description" content="The shell has a large number of options available that you can use to customise the command prompt - the text shown in front of your cursor as you type commands. In this chapter we will look at how you can change the command prompt to show the information that you would like to see."><meta data-rh="true" property="og:description" content="The shell has a large number of options available that you can use to customise the command prompt - the text shown in front of your cursor as you type commands. In this chapter we will look at how you can change the command prompt to show the information that you would like to see."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://effective-shell.com/part-5-building-your-toolkit/customising-your-command-prompt"><link data-rh="true" rel="alternate" href="https://effective-shell.com/part-5-building-your-toolkit/customising-your-command-prompt" hreflang="en"><link data-rh="true" rel="alternate" href="https://effective-shell.com/part-5-building-your-toolkit/customising-your-command-prompt" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HZFMZV9Z4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-8HZFMZV9Z4",{anonymize_ip:!0})</script>


<script src="https://cdn.jsdelivr.net/npm/docusaurus-plugin-drawio/viewer.min.js"></script>


<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6181461532532600" async></script>
<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6181461532532600" async></script><link rel="stylesheet" href="/assets/css/styles.51892cac.css">
<link rel="preload" href="/assets/js/runtime~main.e3898e66.js" as="script">
<link rel="preload" href="/assets/js/main.ece95218.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Effective Shell Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Effective Shell Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Effective Shell</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="navbar__item navbar__link" href="/donate">Donate</a><a href="https://github.com/dwmkerr/terminal-ai" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Terminal AI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div><a href="https://github.com/dwmkerr/effective-shell/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-1-transitioning-to-the-shell/">Transitioning to the Shell</a><button aria-label="Toggle the collapsible sidebar category &#x27;Transitioning to the Shell&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-2-core-skill/">Core Skills</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core Skills&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-3-manipulating-text/">Manipulating Text and Streams</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manipulating Text and Streams&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-4-shell-scripting/">Shell Scripting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Shell Scripting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/part-5-building-your-toolkit/">Building Your Toolkit</a><button aria-label="Toggle the collapsible sidebar category &#x27;Building Your Toolkit&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/configuring-the-shell">Configuring the Shell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/part-5-building-your-toolkit/customising-your-command-prompt">Customising Your Command Prompt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/managing-your-dotfiles">Managing your Dotfiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/controlling-changes-with-git">Controlling Changes with Git</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/managing-rempte-git-repositories/">Managing Remote Git Repositories and Sharing Your Dotfiles</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/part-6-advanced-techniques/">Advanced Techniques</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced Techniques&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/xx-appendices/installing-samples/">Appendices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zz-developer-guide/components">Developer Guide</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Customising Your Command Prompt</h1></header><p>The shell has a large number of options available that you can use to customise the <em>command prompt</em> - the text shown in front of your cursor as you type commands. In this chapter we will look at how you can change the command prompt to show the information that you would like to see.</p><p>We will also create a script that allows us to set our own command prompt &#x27;theme&#x27; from a list that we can extend over time. This script will also handle the differences between Bash-like shells and Z-Shell for us, allowing us to have a consistent command prompt across different types of shells!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-command-promptindex">The Command Prompt<a class="hash-link" href="#the-command-promptindex" title="Direct link to heading">​</a></h2><p>The <em>command prompt</em> is the text that is shown to the left of your cursor to show that the shell is waiting for you to type a command. Each distribution comes with its own configuration for the command prompt, but the default is often similar to the one shown below:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is the prompt on an Ubuntu virtual machine I have set up. If you want to set up a free virtual machine yourself, you can follow the guide at <a href="/work-in-progress">Appendix - Setting Up a Linux Virtual Machine</a>.</p><p>Let&#x27;s take a look at each of the components that make up the prompt:</p><ul><li><code>dwmkerr</code> - The first thing that is shown is the name of the current user</li><li><code>@</code> - Next we have an &#x27;at symbol&#x27; character that is used as a separator between the username field and the following field</li><li><code>effective-shell-ubuntu</code>: This is the <em>hostname</em> of the machine</li><li><code>:</code> - A colon separates the hostname from the next field</li><li><code>~</code> - Next we have the current working directory</li><li><code>$</code> - Finally we have the prompt itself, the <code>$</code> symbol shows we are a normal user, rather than a &#x27;root&#x27; user</li></ul><p>If we change directory, our prompt will be updated:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~$ cd effective-shell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~/effective-shell$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If we change to the &#x27;super&#x27; user we can see that the username changes to <code>root</code> and the <code>$</code> dollar symbol changes to a <code>#</code> hash symbol:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ununtu-20:~/effective-shell$ sudo su</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@effective-shell-ununtu-20:/home/dwmkerr/effective-shell#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>#</code> symbol is a useful reminder that we are the root user. It is important to be careful when running commands as the root user as we could easily break things by changing system files.</p><p>So out-of-the box on most systems our command prompt shows a number of useful fields. But we can actually customise this prompt to include almost any kind of information we would like to see. Let&#x27;s take a look!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="customising-the-command-prompt">Customising the Command Prompt<a class="hash-link" href="#customising-the-command-prompt" title="Direct link to heading">​</a></h2><p>The structure of the command prompt is specified in the <code>PS1</code> shell variable. This stands for &#x27;Prompt String 1&#x27;. The shell uses this variable to write out the command prompt.</p><p>We can see the contents of this variable by using <code>echo</code> or <code>printf</code> to write it to the screen:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~/effective-shell$ echo $PS1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\[\e]0;\u@\h: \w\a\]${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This looks extremely complicated - but don&#x27;t worry, by the time we&#x27;ve finished this chapter you&#x27;ll be able to understand what this mess of special characters means!</p><p>The easiest way to see how these special prompt strings work is to start using them, so let&#x27;s get started and customise our prompt.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-prompt-string">The Prompt String<a class="hash-link" href="#the-prompt-string" title="Direct link to heading">​</a></h3><p>You can set your own prompt string by setting the <code>PS1</code> variable:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~/effective-shell$ PS1=&quot;---&gt; &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The shell will use the contents of the <code>PS1</code> variable to display the prompt. We can use plan text as shown above, but there&#x27;s also a lot more that we can do to customise this prompt!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="special-characters">Special Characters<a class="hash-link" href="#special-characters" title="Direct link to heading">​</a></h3><p>When the shell reads the <code>PS1</code> variable, it allows certain special characters to be specified. These characters can be used to customise how the prompt string looks.</p><p>The special characters that the shell uses are listed below:</p><table><thead><tr><th>Characters</th><th>Usage</th></tr></thead><tbody><tr><td><code>\a</code></td><td>The special &#x27;beep&#x27; character, that tells the shell to play a beep sound through the speakers.</td></tr><tr><td><code>\d</code></td><td>The date in &quot;Weekday Month Date&quot; format, for example: &#x27;Tue May 26&#x27;)</td></tr><tr><td><code>\D{format}</code></td><td>The date in a format specified by the <code>format</code> value.</td></tr><tr><td><code>\e</code></td><td>An ASCII escape character (033). This is used to print special characters.</td></tr><tr><td><code>\h</code></td><td>The hostname up to the first <code>.</code> dot.</td></tr><tr><td><code>\H</code></td><td>The hostname.</td></tr><tr><td><code>\j</code></td><td>The number of jobs currently managed by the shell.</td></tr><tr><td><code>\l</code></td><td>The basename of the shell&#x27;s terminal device.</td></tr><tr><td><code>\n</code></td><td>A newline character.</td></tr><tr><td><code>\r</code></td><td>A carriage return character.</td></tr><tr><td><code>\s</code></td><td>The name of the shell, the basename of <code>$0</code>, for example: <code>-bash</code>.</td></tr><tr><td><code>\t</code></td><td>The current time in 24-hour HH:MM:SS format.</td></tr><tr><td><code>\T</code></td><td>The current time in 12-hour HH:MM:SS format.</td></tr><tr><td><code>\@</code></td><td>The current time in 12-hour am/pm format.</td></tr><tr><td><code>\A</code></td><td>The current time in 24-hour HH:MM format.</td></tr><tr><td><code>\u</code></td><td>The username of the current user.</td></tr><tr><td><code>\v</code></td><td>The version of bash, for example: &#x27;5.0&#x27;.</td></tr><tr><td><code>\V</code></td><td>The release of bash, with the patch level, for example: &#x27;5.0.17&#x27;.</td></tr><tr><td><code>\w</code></td><td>The current working directory, with <code>$HOME</code> abbreviated with a <code>~</code> tilde symbol.</td></tr><tr><td><code>\W</code></td><td>The current working directory name (rather than the entire path as is used for <code>\w</code>).</td></tr><tr><td><code>\!</code></td><td>The history number of this command.</td></tr><tr><td><code>\#</code></td><td>The command number of this command</td></tr><tr><td><code>\$</code></td><td>The <code>$</code> dollar symbol, unless we are a super-user, in which case the <code>#</code> hash symbol is used.</td></tr><tr><td><code>\nnn</code></td><td>The character corresponding to the octal number <code>nnn</code>, used to show special characters.</td></tr><tr><td><code>\\</code></td><td>A <code>\</code> backslash character.</td></tr><tr><td><code>\[</code></td><td>The &#x27;start of non-printing characters&#x27; sequence.</td></tr><tr><td><code>\]</code></td><td>The &#x27;end of non-printing characters&#x27; sequence.</td></tr></tbody></table><p>Some of these sequences are reasonably self-explanatory, some are a little more complex. Let&#x27;s use some of them now to see how we can customise the prompt.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Z-Shell</div><div class="admonitionContent_S0QG"><p>The <code>zsh</code> shell uses different sequences. However, I suggest that you follow this chapter through to understand how Bash-like shells work and then you can apply the same techniques using Z-Shell. The Z-Shell documentation links are at the end of the chapter.</p><p>Later on in this chapter we will introduce a function to help set the prompt, this function automatically converts to the prompt into Z-Shell format if needed. So the techniques you learn here should still be able to be used in Z-Shell.</p></div></div><p>To change the prompt, all we need to do is set the <code>PS1</code> variable. Let&#x27;s start by changing the prompt so that it shows the date, time and the <code>$</code> or <code>#</code> prompt symbol:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~$ PS1=&#x27;\d \@ \$ &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sun Jun 06 12:43 PM $</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example we&#x27;ve used the <code>\d</code> (current date), <code>\@</code> (current time in am/pm format) and <code>\$</code> (prompt) and a space for our prompt. Notice that once we set <code>PS1</code> in the shell, the prompt immediately changed.</p><p>How about if we want to show the number of jobs, then the command number, then the prompt? Easy!</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Sun Jun 06 04:43 AM $ PS1=&#x27;[\j] (\#) \$ &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[0] (4) $ sleep 10 &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1] 27598</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1] (5) $ sleep 10 &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[2] 27600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[2] (6) $ sleep 10 &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[3] 27601</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[3] (7) $</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example we&#x27;ve used the <code>\j</code> (current job) sequence, and surrounded it with square brackets. Then we used <code>#</code> (command number), surrounded by parentheses, then the <code>\$</code> shell prompt. I also started some background jobs, that just run the <code>sleep</code> (<em>wait for a number of seconds</em>) command, so that we can see that the number of jobs is changing. If you need a refresher on jobs, check <a href="/part-2-core-skills/job-control">Chapter 9 - Job Control</a>.</p><p>Note that we are using single quotes when specifying the value of the <code>PS1</code>. If we didn&#x27;t use single quotes, then the shell would see the dollar symbol and think that we were trying to use a variable. For a reminder on how quoting works, check <a href="/part-3-manipulating-text/variables-reading-input-and-mathematics/">Chapter 19 - Variables, Reading Input, and Mathematics</a>.</p><p>If you are following along or trying this out in your own shell, you might have noticed that we don&#x27;t have any colours for the new prompts we have set, everything is shown in white. To set the colour of the prompt we need to use some special characters.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changing-the-colour-and-text-formatting">Changing the Colour and Text Formatting<a class="hash-link" href="#changing-the-colour-and-text-formatting" title="Direct link to heading">​</a></h3><p>In the earlier part of this chapter we saw that the default prompt on systems like Ubuntu contains lots of special characters. For reference, here is the value of the <code>PS1</code> variable on a clean Ubuntu 20 installations: </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~/effective-shell$ echo $PS1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\[\e]0;\u@\h: \w\a\]${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Some of these characters we might now be able to recognise, such as <code>\u</code> for the username and <code>\h</code> for the host. The characters that start with the sequence <code>\033</code> are <em>ANSI color codes</em>. ANSI stands for <em>American National Standards Institute</em>, an organisation that was set up to attempt to set common standards for computing platforms.</p><p>In the early days of Unix, each vendor developed their own special characters that could be used to control the visual formatting of output. These characters would vary from platform to platform, which made trying to create scripts or functionality that worked across multiple platforms complex. To deal with this, the ANSI organisation defined a common set of codes that could be printed to a terminal to control the visual style of the output.</p><p>To tell a terminal that we want to use a special sequence to control the formatting or output of text, we can use these <em>ANSI Escape Sequences</em>. First we write out the characters <code>\033</code> or <code>\e</code>. This is the sequence that represents the &#x27;escape&#x27; key. The first version is the &#x27;escape&#x27; key code written in &#x27;octal&#x27; format (octal is a format where numbers are written in base eight, rather than base ten). The second sequence is an alternative way of writing the &#x27;escape&#x27; key.</p><p>When a terminal sees the escape sequence, it knows that the <em>following</em> sequence is used to define the formatting. The table below shows some of the different formats that can be used:</p><table><thead><tr><th>Sequence</th><th>Meaning</th></tr></thead><tbody><tr><td><strong>Foreground Color</strong></td><td></td></tr><tr><td><code>\033[30m</code></td><td>Set foreground to &#x27;black&#x27;.</td></tr><tr><td><code>\033[31m</code></td><td>Set foreground to &#x27;red&#x27;.</td></tr><tr><td><code>\033[32m</code></td><td>Set foreground to &#x27;green&#x27;.</td></tr><tr><td><code>\033[33m</code></td><td>Set foreground to &#x27;yellow&#x27;.</td></tr><tr><td><code>\033[34m</code></td><td>Set foreground to &#x27;blue&#x27;.</td></tr><tr><td><code>\033[35m</code></td><td>Set foreground to &#x27;magenta&#x27;.</td></tr><tr><td><code>\033[36m</code></td><td>Set foreground to &#x27;cyan&#x27;.</td></tr><tr><td><code>\033[37m</code></td><td>Set foreground to &#x27;white&#x27; (normally light grey)</td></tr><tr><td><strong>Foreground Color (Bold)</strong></td><td></td></tr><tr><td><code>\033[1;30m</code></td><td>Set foreground to &#x27;bright black&#x27; (grey, or bold black)</td></tr><tr><td><code>\033[1;31m</code></td><td>Set foreground to &#x27;bright red&#x27; (or bold red).</td></tr><tr><td><code>\033[1;32m</code></td><td>Set foreground to &#x27;bright green&#x27; (or bold green).</td></tr><tr><td><code>\033[1;33m</code></td><td>Set foreground to &#x27;bright yellow&#x27; (or bold yellow).</td></tr><tr><td><code>\033[1;34m</code></td><td>Set foreground to &#x27;bright blue&#x27; (or bold blue).</td></tr><tr><td><code>\033[1;35m</code></td><td>Set foreground to &#x27;bright purple&#x27; (or bold purple).</td></tr><tr><td><code>\033[1;36m</code></td><td>Set foreground to &#x27;bright cyan&#x27; (or bold cyan).</td></tr><tr><td><code>\033[1;37m</code></td><td>Set foreground to &#x27;bright white&#x27; (or bold white).</td></tr><tr><td><strong>Background Color</strong></td><td></td></tr><tr><td><code>\033[0;40m</code></td><td>Set background to &#x27;black&#x27;.</td></tr><tr><td><code>\033[0;41m</code></td><td>Set background to &#x27;red&#x27;.</td></tr><tr><td><code>\033[0;42m</code></td><td>Set background to &#x27;green&#x27;.</td></tr><tr><td><code>\033[0;43m</code></td><td>Set background to &#x27;brown&#x27;.</td></tr><tr><td><code>\033[0;44m</code></td><td>Set background to &#x27;blue&#x27;.</td></tr><tr><td><code>\033[0;45m</code></td><td>Set background to &#x27;purple&#x27;.</td></tr><tr><td><code>\033[0;46m</code></td><td>Set background to &#x27;cyan&#x27;.</td></tr><tr><td><code>\033[0;47m</code></td><td>Set background to &#x27;white&#x27; (normally light grey).</td></tr><tr><td><strong>Reset Colors</strong></td><td></td></tr><tr><td><code>\033[0m</code></td><td>Reset the text colors.</td></tr></tbody></table><p>Notice that each sequence starts with the &#x27;escape&#x27; character, followed by <code>[</code> or <code>[1;</code>. <code>[</code> will use the &#x27;normal&#x27; colour, <code>[1;</code> will use the &#x27;bright&#x27; colour (how this is shown depends on your terminal emulator, in many modern emulators the text is shown in the same colour but is bold). You can also use <code>[0;</code> to clear any changes to the foreground or background before you set the new one. After this there are one of eight colours that can be used, specified by the characters in the range from <code>30m</code> to <code>37m</code>. The sequences in the range <code>40m</code> to <code>47m</code> set the background color. The sequence <code>0m</code> resets the colors.</p><p>With these codes we can print coloured text. When we write text that uses escape sequences, we need to tell the shell that our text needs to have these escape sequences processed properly. We can use the <code>printf</code> command or <code>echo -e</code> to do this. <code>printf</code> should be preferred as not all systems support the <code>-e</code> parameter for <code>echo</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">printf</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string entity" style="color:#36acaa">\033</span><span class="token string" style="color:#e3116c">[31mRED</span><span class="token string entity" style="color:#36acaa">\033</span><span class="token string" style="color:#e3116c">[0m</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">printf</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string entity" style="color:#36acaa">\033</span><span class="token string" style="color:#e3116c">[1;31mLIGHT RED</span><span class="token string entity" style="color:#36acaa">\033</span><span class="token string" style="color:#e3116c">[0m</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">printf</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string entity" style="color:#36acaa">\033</span><span class="token string" style="color:#e3116c">[0;30m</span><span class="token string entity" style="color:#36acaa">\033</span><span class="token string" style="color:#e3116c">[42mBLACK ON GREEN</span><span class="token string entity" style="color:#36acaa">\033</span><span class="token string" style="color:#e3116c">[0m</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output of these commands will be the text below:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LIGHT RED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BLACK ON GREEN</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>However, the colour of the foreground and background should change on each line. The exact formatting will change depending on the terminal emulator you use. Some terminal emulators use bold text for the &#x27;bright&#x27; colours. </p><p>With our new knowledge of how to use ANSI Escape Sequences to set the format of text, we can update our <code>PS1</code> variable to show a prompt in colour. As an example, the code below sets the prompt to show the username in blue and the name of the current working directory in green, followed by a white <code>$</code> prompt symbol, followed by the &#x27;reset&#x27; sequence so that the text we type afterwards does not have its colour changed:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~/effective-shell$ PS1=&#x27;\033[34m\u \033[32m\W \033[37m\$ &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr effective-shell $</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The prompt above will be shown in color on modern terminals.</p><p>There is one snag to this. If you set your prompt in this way and press the &#x27;up&#x27; and &#x27;down&#x27; keys to cycle through previously entered commands, you might see that your shell prompt gets overwritten. The reason for this is that we need to tell the shell that colour and formatting sequences are &#x27;non-printing&#x27; characters - the sequences don&#x27;t actually produce written text in the terminal.</p><p>To deal with this we need to surround each colour sequence with the special characters <code>\[</code> and <code>\]</code>. This tells the shell when a &#x27;non-printing&#x27; sequence starts and when it ends. To fix our <code>PS1</code> variable, we can use the value below:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable environment constant" style="color:#36acaa">PS1</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;\[\033[34m\]\u \[\033[32m\]\W \[\033[37m\]\$ \[\033[0m\]&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Phew! This is a lot of work to go to just to format the colour of the prompt. Later in this chapter we&#x27;ll build a script that will make it far easier to work with colours and text formatting!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-data-to-the-command-prompt">Adding Data to the Command Prompt<a class="hash-link" href="#adding-data-to-the-command-prompt" title="Direct link to heading">​</a></h3><p>When we set the <code>PS1</code> variable, we are simply setting it to a string. This string could be anything, for example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~$ PS1=&#x27;-Ready?---&gt; &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Ready?---&gt; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We don&#x27;t need to limit ourselves to the special sequences we&#x27;ve seen so far in this chapter - we can run any commands we like to build a command prompt. For example, we could use the use the <code>ls</code> (<em>list directory contents</em>) and <code>wc</code> (<em>count lines and words</em>) commands to count the number of files and folders in the current directory and show that in the prompt:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable environment constant" style="color:#36acaa">PS1</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">ls</span><span class="token string variable" style="color:#36acaa"> -al </span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable function" style="color:#d73a49">wc</span><span class="token string variable" style="color:#36acaa"> -l </span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable function" style="color:#d73a49">tr</span><span class="token string variable" style="color:#36acaa"> -d </span><span class="token string variable string" style="color:#e3116c">&#x27;[:space:]&#x27;</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c"> </span><span class="token string entity" style="color:#36acaa">\\</span><span class="token string" style="color:#e3116c">$ &quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When I run this command, my prompt will look something like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">32 $</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We have used the <code>$()</code> notation to run a sub-shell that lists the contents of the current directory and then pipes them to <code>wc -l</code>, which counts the number of lines. Finally we pipe the result into <code>tr -d &#x27;[:space:]</code> to remove the whitespace around the line count.</p><p>To use the <code>$()</code> notation, or any shell variable, we have to use double quotes in the string, otherwise the shell will write out those characters literally. And because we are using double quotes, we need an extra backslash before last <code>\$</code> character to escape it, so that the shell doesn&#x27;t try to treat it as a variable.</p><p>However - there&#x27;s a subtle bug in this <code>PS1</code> configuration! Let&#x27;s see what happens when we change directories:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">32 $ cd effective-shell/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">32 $ touch newfile-{1..10}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">32 $ </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the session above I changed to the <em>effective-shell</em> directory. But the count is still showing as <code>32</code>. This is suspicious. After creating ten new files with <code>touch newfile-{1..10}</code> the count still shows <code>32</code>.</p><p>The reason for this is that <code>32</code> was the number of files and folders in the current directory <em>at the time the <code>PS1</code> variable was set</em>. We changed the <code>PS1</code> variable once - what we really need to do is have the prompt count the files each time the prompt is shown.</p><p>Fortunately, there is a special syntax for this! We just put a <code>\</code> backslash character in front of the <code>$</code> dollar symbol for the sub-shell:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable environment constant" style="color:#36acaa">PS1</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;\</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">ls</span><span class="token string variable" style="color:#36acaa"> -al </span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable function" style="color:#d73a49">wc</span><span class="token string variable" style="color:#36acaa"> -l </span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable function" style="color:#d73a49">tr</span><span class="token string variable" style="color:#36acaa"> -d </span><span class="token string variable string" style="color:#e3116c">&#x27;[:space:]&#x27;</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c"> </span><span class="token string entity" style="color:#36acaa">\\</span><span class="token string" style="color:#e3116c">$ &quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The backslash before the sub-shell tells the shell that it should evaluate the sub-shell <em>each time</em> the prompt is shown:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">32 $ touch newfile-{1..10}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">42 $</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is where the real power of the <code>PS1</code> variable comes into play. Because we set it using the shell itself, we can run <em>any</em> commands that we find useful and integrate their output into our command prompt.</p><p>Let&#x27;s see this in action by creating a script to make customising our prompt far easier and more intuitive!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-shell-script-to-customise-the-prompt">A Shell Script to Customise the Prompt<a class="hash-link" href="#a-shell-script-to-customise-the-prompt" title="Direct link to heading">​</a></h2><p>We can write a script to make it much easier to customise our shell prompt. Rather than having to remember each of the colour sequences, we can store them in variables to make them easier to refer to. We can also run any commands that we&#x27;d like to run to allow us to show extra information.</p><p>There is a script in the Effective Shell samples at <em>~/effective-shell/scripts/set_ps1.sh</em> that we can use to set our <code>PS1</code> variable in a much more user-friendly way.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Downloading the Samples</div><div class="admonitionContent_S0QG"><p>Run the following commands in your shell to download the samples:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> effective.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>The <em>set_ps1.sh</em> script is quite long, so let&#x27;s go through it bit-by-bit.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Keep track of the original PS1 value.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">_original_ps1</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${</span><span class="token string variable environment constant" style="color:#36acaa">PS1</span><span class="token string variable" style="color:#36acaa">}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">set_ps1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Foreground colours.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">fg_black</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setaf </span><span class="token variable number" style="color:#36acaa">0</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># \033[30m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">fg_red</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setaf </span><span class="token variable number" style="color:#36acaa">1</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic"># \033[31m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">fg_green</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setaf </span><span class="token variable number" style="color:#36acaa">2</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># \033[32m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">fg_yellow</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setaf </span><span class="token variable number" style="color:#36acaa">3</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># \033[33m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">fg_blue</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setaf </span><span class="token variable number" style="color:#36acaa">4</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># \033[34m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">fg_magenta</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setaf </span><span class="token variable number" style="color:#36acaa">5</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># \033[35m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">fg_cyan</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setaf </span><span class="token variable number" style="color:#36acaa">6</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># \033[36m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">fg_white</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setaf </span><span class="token variable number" style="color:#36acaa">7</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># \033[37m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Background colours.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">bg_black</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setab </span><span class="token variable number" style="color:#36acaa">0</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># \033[40m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">bg_red</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setab </span><span class="token variable number" style="color:#36acaa">1</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic"># \033[41m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">bg_green</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setab </span><span class="token variable number" style="color:#36acaa">2</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># \033[42m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">bg_yellow</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setab </span><span class="token variable number" style="color:#36acaa">3</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># \033[43m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">bg_blue</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setab </span><span class="token variable number" style="color:#36acaa">4</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># \033[44m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">bg_magenta</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setab </span><span class="token variable number" style="color:#36acaa">5</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># \033[45m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">bg_cyan</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setab </span><span class="token variable number" style="color:#36acaa">6</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># \033[46m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">bg_white</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput setab </span><span class="token variable number" style="color:#36acaa">7</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># \033[47m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>First, we store the current value of <code>PS1</code> in a variable named <code>_original_ps1</code>. This is so that later on if we have changed the <code>PS1</code> variable, we can change it back to what it was set to originally. The <code>_</code> underscore in the variable name is a convention that indicates that this variable is used internally in the script.</p><p>Next, we define a function called <code>set_ps1</code>. Then we use the <code>tput</code> command (<em>query terminfo database</em>) to get the exact escape sequences for the foreground and background colours. For easy reference the escape sequences are shown to the right of each command as a comment.</p><p>Next, we get the escape sequences for some of the other formatting options, such as &#x27;bold&#x27; (which will be &#x27;bright&#x27; on some terminals):</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Text styles and reset. Note that on some terminals &#x27;bold&#x27; will produce</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># light colours for bright colours, on others it will actually show the text</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># in bold.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">bold</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput bold</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># \033[1m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">dim</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput dim</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic"># \033[2m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">start_underline</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput smul</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># \033[4m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">stop_underline</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput mmul</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># \033[24m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">reset</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">tput sgr0</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># \033[0m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You might recall the <code>tput</code> command from the section &#x27;colourising output&#x27; in <a href="/part-4-shell-scripting/useful-patterns-for-shell-scripts">Chapter 23 - Useful Patterns for Shell Scripts</a>.</p><p>After this we use a <code>case</code> statement to set the <code>PS1</code> variable based on the value of the first parameter that was provided to the function:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Depending on the name of the theme provided, set the prompt.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        debian</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Debian/Ubuntu style:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">#   \u@\h - username@host (bold/green)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">#   \w - working directory (bold/blue)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">#   \$ - prompt (# if root, otherwise $) (bold/white)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token assign-left variable environment constant" style="color:#36acaa">PS1</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;\[</span><span class="token string variable" style="color:#36acaa">${bold}</span><span class="token string variable" style="color:#36acaa">${fg_green}</span><span class="token string" style="color:#e3116c">\]\u@\h:\[</span><span class="token string variable" style="color:#36acaa">${fg_blue}</span><span class="token string" style="color:#e3116c">\]\w\[</span><span class="token string variable" style="color:#36acaa">${fg_white}</span><span class="token string" style="color:#e3116c">\]</span><span class="token string entity" style="color:#36acaa">\\</span><span class="token string" style="color:#e3116c">$\[</span><span class="token string variable" style="color:#36acaa">${reset}</span><span class="token string" style="color:#e3116c">\] &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        datetime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># A style that shows the date and time:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">#   \D{%Y-%m-%d} - the year/month/date (in white)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">#   \@ - the time (in green)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">#   \$ - prompt (# if root, otherwise $) (bold/white)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token assign-left variable environment constant" style="color:#36acaa">PS1</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;\[</span><span class="token string variable" style="color:#36acaa">${fg_white}</span><span class="token string" style="color:#e3116c">\]\D{%Y-%m-%d} \[</span><span class="token string variable" style="color:#36acaa">${bold}</span><span class="token string variable" style="color:#36acaa">${fg_green}</span><span class="token string" style="color:#e3116c">\]\@\[</span><span class="token string variable" style="color:#36acaa">${fg_white}</span><span class="token string" style="color:#e3116c">\] </span><span class="token string entity" style="color:#36acaa">\\</span><span class="token string" style="color:#e3116c">$\[</span><span class="token string variable" style="color:#36acaa">${reset}</span><span class="token string" style="color:#e3116c">\] &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Add your own themes here!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        *</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Restore PS1 to its original value.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token assign-left variable environment constant" style="color:#36acaa">PS1</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${_original_ps1}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">esac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># If we are in Z-Shell convert the PS1 to use Z-Shell format.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -n </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$ZSH_VERSION</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token assign-left variable environment constant" style="color:#36acaa">PS1</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">_to_zsh </span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable string environment constant" style="color:#36acaa">$PS1</span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this code we check the first parameter of the function <code>$1</code>. If it matches the string <code>debian</code> we set the <code>PS1</code> variable to a format that is similar to what is used by Debian Linux distributions. If it matches the string <code>datetime</code> we set <code>PS1</code> to a prompt that shows the current date and time. If any other value is used, we reset the <code>PS1</code> variable back to its original value.</p><p>Before we complete the function, we check to see if <code>ZSH_VERSION</code> is set - this is to check whether we are in a <code>zsh</code> shell. If we are, then we use the <code>_to_zsh</code> function to convert the <code>PS1</code> string into the format used by Z-Shell.</p><p>Finally, we use the <code>}</code> to complete the definition of the function.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Z-Shell</div><div class="admonitionContent_S0QG"><p>The <code>zsh</code> shell differs considerably from Bash and Bash-like shells in how it handles the <code>PS1</code> variable. There is no need for the <code>\[</code> or <code>\]</code> sequences, there are built in color variables such as <code>$fg[red]</code> for &#x27;red&#x27; and the special sequences are different (for example, rather than <code>\u</code> for username, Z-Shell uses <code>%n</code>).</p><p>The <code>set_ps1</code> function in the samples converts the <code>PS1</code> string to Z-Shell format if it is running in Z-Shell. However, this conversion is not perfect as some of the sequences shown in this chapter do not have an equivalent in Z-Shell. If you want to customise a Z-Shell prompt you can check the manual page <code>man zshmisc</code> and search for <code>PROMPT\ SEQUENCES</code>.</p></div></div><p>Notice how much easier it is to specify the values for the <code>PS1</code> string when we have the colours and formatting defined in variables! We still need to wrap the formatting characters with <code>\[</code> and <code>\]</code> to make sure that the shell knows how long the command prompt is, but this is <em>far</em> easier to read than the samples we saw before where we provide the ANSI Escape Sequences.</p><p>To use this script, we can simply <code>source</code> it into our current session and then change the prompt by calling the <code>set_ps1</code> function:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~$ source ~/effective-shell/scripts/set_ps1.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~$ set_ps1 datetime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021-06-06 04:10 PM $ set_ps1 debian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~$ </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This script has a placeholder in the <code>case</code> statement for you to add your own &#x27;themes&#x27; that you want to be able to use in your shell.</p><p>For example, one &#x27;theme&#x27; I often use is below:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># A style that shows some git information.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Build a string that shows:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># - The branch (underlined if &#x27;main&#x27;) in green</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># - A red exclamation if there are any local changes not committed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># - An indicator of the number of stashed items, if any.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-name function" style="color:#d73a49">_git_info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Git details.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">git_branch_name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">git</span><span class="token string variable" style="color:#36acaa"> branch --show-current</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">git_any_local_changes</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">git</span><span class="token string variable" style="color:#36acaa"> status --porcelain</span><span class="token string variable operator" style="color:#393A34">=</span><span class="token string variable" style="color:#36acaa">v1 </span><span class="token string variable operator file-descriptor important" style="color:#393A34">2</span><span class="token string variable operator" style="color:#393A34">&gt;</span><span class="token string variable" style="color:#36acaa">/dev/null</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">git_stash_count</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">git</span><span class="token string variable" style="color:#36acaa"> rev-list --walk-reflogs --count </span><span class="token string variable punctuation" style="color:#393A34">\</span><span class="token string variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string variable" style="color:#36acaa">            refs/stash -- </span><span class="token string variable operator file-descriptor important" style="color:#393A34">2</span><span class="token string variable operator" style="color:#393A34">&gt;</span><span class="token string variable" style="color:#36acaa">/dev/null</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Ignore error when no stashes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin class-name">local</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">git_info</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${git_branch_name}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;main&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token assign-left variable" style="color:#36acaa">git_info</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${bold}</span><span class="token string variable" style="color:#36acaa">${fg_green}</span><span class="token string variable" style="color:#36acaa">${start_underline}</span><span class="token string variable" style="color:#36acaa">${git_branch_name}</span><span class="token string variable" style="color:#36acaa">${reset}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token assign-left variable" style="color:#36acaa">git_info</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${bold}</span><span class="token string variable" style="color:#36acaa">${fg_green}</span><span class="token string variable" style="color:#36acaa">${git_branch_name}</span><span class="token string variable" style="color:#36acaa">${reset}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -z </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${git_any_local_changes}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Note that we have to be careful to put the exclamation mark</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># in single quotes so that it is not expanded to the last command!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token assign-left variable" style="color:#36acaa">git_info</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${git_info}</span><span class="token string" style="color:#e3116c"> </span><span class="token string variable" style="color:#36acaa">${bold}</span><span class="token string variable" style="color:#36acaa">${fg_red}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string" style="color:#e3116c">&#x27;!&#x27;</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${reset}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${git_stash_count</span><span class="token string variable operator" style="color:#393A34">:-</span><span class="token string variable" style="color:#36acaa">0}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -gt </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token assign-left variable" style="color:#36acaa">git_info</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${git_info}</span><span class="token string" style="color:#e3116c"> </span><span class="token string variable" style="color:#36acaa">${bold}</span><span class="token string variable" style="color:#36acaa">${fg_yellow}</span><span class="token string variable" style="color:#36acaa">${git_stash_count}</span><span class="token string" style="color:#e3116c"> in stash</span><span class="token string variable" style="color:#36acaa">${reset}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin class-name">printf</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${git_info}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Now show a Debian style prompt with the git info above it.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable environment constant" style="color:#36acaa">PS1</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;\</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable" style="color:#36acaa">_git_info</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string entity" style="color:#36acaa">\\</span><span class="token string" style="color:#e3116c">[</span><span class="token string variable" style="color:#36acaa">${bold}</span><span class="token string variable" style="color:#36acaa">${fg_green}</span><span class="token string" style="color:#e3116c">\]\u@\h:\[</span><span class="token string variable" style="color:#36acaa">${fg_blue}</span><span class="token string" style="color:#e3116c">\]\w\[</span><span class="token string variable" style="color:#36acaa">${fg_white}</span><span class="token string" style="color:#e3116c">\]</span><span class="token string entity" style="color:#36acaa">\\</span><span class="token string" style="color:#e3116c">$\[</span><span class="token string variable" style="color:#36acaa">${reset}</span><span class="token string" style="color:#e3116c">\] &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Don&#x27;t worry if you are not familiar with &#x27;git&#x27;, we will see it in a couple of chapters. The important thing is that this snippet shows that you can add almost any kind of information that you might find useful to your command prompt. When I run <code>set_ps1 git</code>, my prompt looks like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">feat/chapter-26-customise-your-command-prompt ! 3 in stash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~/repos/github/dwmkerr/effective-shell$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>My prompt is now spread across two lines - the first shows me the branch I am on, a red exclamation point if I have made changes but not saved them, and the number of items I have in my &#x27;stash&#x27;. The second line shows the standard Debian prompt.</p><p>The code shown above has been slightly simplified to make it more readable, you can see the exact version in the samples.</p><p>You can use the <em>~/effective-shell/scripts/set_ps1.sh</em> file to build your own &#x27;themes&#x27; and easily change between them in the shell.</p><p>If you want to always <code>source</code> this file into your shell on startup, just add the following like to <em>~/.bashrc</em>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">source</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;~/effective-shell/scripts/set_ps1.sh&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You could also set the default <code>PS1</code> variable immediately after sourcing the script if you like:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Source the set_ps1 function and set our &#x27;theme&#x27; to Debian.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">source</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;~/effective-shell/scripts/set_ps1.sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set_ps1 </span><span class="token string" style="color:#e3116c">&quot;debian&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the next chapter we will look at some sensible ways we can organise files like the <em>set_ps1.sh</em> script and the <em>~/.bashrc</em> file so that we can easily manage our customisations and share them across different machines.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-prompt-configuration">Additional Prompt Configuration<a class="hash-link" href="#additional-prompt-configuration" title="Direct link to heading">​</a></h2><p>There are some other variables that you might want to use to configure your prompt:</p><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>PS2</code></td><td>This is shown when performing &#x27;continuation&#x27; and is normally set to <code>&gt;</code>.</td></tr><tr><td><code>PS3</code></td><td>This is shown when the <code>select</code> command is used and is normally not set, so the default <code>#?</code> is used.</td></tr><tr><td><code>PS4</code></td><td>This is shown when tracing with <code>set -x</code> and is normally set to <code>+</code>.</td></tr><tr><td><code>PROMPT_DIRTRIM</code></td><td>This can be set to limit the number of directories shown with using <code>\w</code> or <code>\W</code> in your prompt.</td></tr><tr><td><code>PROMPT_COMMAND</code></td><td>This can be set to limit the number of directories shown with using <code>\w</code> or <code>\W</code> in your prompt.</td></tr></tbody></table><p>Let&#x27;s take a look at how each one can be used.</p><p><strong>PS2</strong></p><p>If we have a long line of text in the shell, we can start a &#x27;continuation&#x27;<!-- --> by entering the backlash symbol:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;This is a really really \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; long \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; long line of text&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This is a really really long long line of text</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>&gt;</code> symbol is shown when we press &#x27;enter&#x27; after entering a <code>\</code> backslash symbol. This symbol is used to remind us that we are not entering a new command, we are just continuing the current command on a new line. You can change the text shown by setting <code>PS2</code>.</p><p><strong>PS3</strong></p><p><code>PS3</code> allows you to specify the prompt used by the <code>select</code> command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ PS3=&quot;Your choice? : &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ select fruit in Apples Pears; do echo &quot;$fruit&quot;; done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1) Apples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2) Pears</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your choice? :</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>PS3</code> variable is not set by default. If it is not set, then the <code>select</code> statement uses <code>#?</code> for the prompt.</p><p><strong>PS4</strong></p><p>When you enable &#x27;tracing&#x27; by setting the <code>-x</code> option, each traced line starts with a <code>+</code> symbol:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ set -x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;The date is $(date)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">++ date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ echo &#x27;The date is Sun 06 Jun 2021 08:49:07 AM UTC&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The date is Sun 06 Jun 2021 08:49:07 AM UTC</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can change this symbol by setting the <code>PS4</code> option.</p><p><strong>PROMPT_DIRTRIM</strong></p><p>If you set a value in the <code>PROMPT_DIRTRIM</code> variable, the shell will not show the entire contents of the working directory when you use the special <code>\w</code> sequence in a prompt variable. Instead, it will limit the number of directories shown to the value in <code>PROPMT_DIRTRIM</code> and use an &#x27;ellipses&#x27; for the rest (and ellipses is written as three dots).</p><p>For example, if I was in the folder <em>~/effective-shell/logs/apm-logs</em> and had <code>PROMPT_DIRTRIM</code> set to <code>2</code>, then on Debian my command prompt would look like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dwmkerr@effective-shell-ubuntu-20:~/.../logs/apm-logs$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that only the last two parts of the path to the folder are shown.</p><p><strong>PROMPT_COMMAND</strong></p><p>The <code>PROMPT_COMMAND</code> variable can be used to specify a command or set of commands to run before the prompt is shown.</p><p>A common use for the <code>PROMPT_COMMAND</code> is to save and reload the shell command history before each command is run:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PROMPT_COMMAND=&quot;history -a; history -c; history -r; $PROMPT_COMMAND&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example, we used the <code>history</code> (<em>display or manipulate history list</em>) command three times. First with <code>-a</code> to append the lines from the current session to the history file, then <code>-c</code> to clear the shell history in the session, then <code>-r</code> to reload it.</p><p>For many shells the history of commands is only updated when the shell is closed, this change means that even if the shell is terminated unexpectedly, each command we have executed will still have been written to the history.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="z-shell-and-oh-my-zsh">Z-Shell and Oh-My-Zsh<a class="hash-link" href="#z-shell-and-oh-my-zsh" title="Direct link to heading">​</a></h2><p>Z-Shell does not use the same sequences to format the prompt-string variables. However, the <em>set_ps1.sh</em> script included in the Effective Shell samples will convert the Bash-style <code>PS1</code> variable into Z-Shell formatted prompt strings automatically.</p><p>For Z-Shell users, you might also consider the very popular &quot;Oh-My-Zsh&quot; project. This is a collection of themes and plugins that add many more aliases, functions, autocompletions and more to the shell. One of the most popular features of &quot;Oh-My-Zsh&quot; is its large collection of themes that customise how the prompt looks.</p><p>However, just like with most things in computing, I would strongly recommend that you learn how the fundamentals work as they are described in this chapter before using &quot;Oh-My-Zsh&quot; themes. This will help you understand how things like &quot;Oh-My-Zsh&quot; actually work under the hood.</p><p>You might also realise that you don&#x27;t need to install an additional package to get the styling you want. For example, my own shell prompt includes information on Git, the working directory (trimmed to only show up to three entries), but only requires a few lines of setup and works consistently in Bash-like shells <em>and</em> Z-Shell.</p><p>Enjoy playing around with the prompt customisation! It can be a lot of fun and the options are almost limitless!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">​</a></h2><p>In this chapter we looked at how you can customise the command prompt with the <code>PS1</code> variable, the shell&#x27;s special sequences for useful information like <code>\u</code> for the current user, and how to configure the visual formatting of the prompt. We also looked at a script that makes configuring the command prompt a little easier to manage.</p><p>We&#x27;ve now seen quite a few ways to configure the shell, in the next chapter we&#x27;ll look at some sensible practices that you can use to organise your shell configuration files.</p><p>To find all of the information on how to control the command prompt in the manual, run <code>man bash</code> and search for <code>^PROMPTING</code>. For Z-Shell, run <code>man zshmisc</code> and search for <code>PROMPT\ SEQUENCES</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/dwmkerr/effective-shell/edit/main/docs/05-building-your-toolkit/25-customising-your-command-prompt/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/part-5-building-your-toolkit/configuring-the-shell"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configuring the Shell</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/part-5-building-your-toolkit/managing-your-dotfiles"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Managing your Dotfiles</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-command-promptindex" class="table-of-contents__link toc-highlight">The Command Promptindex</a></li><li><a href="#customising-the-command-prompt" class="table-of-contents__link toc-highlight">Customising the Command Prompt</a><ul><li><a href="#the-prompt-string" class="table-of-contents__link toc-highlight">The Prompt String</a></li><li><a href="#special-characters" class="table-of-contents__link toc-highlight">Special Characters</a></li><li><a href="#changing-the-colour-and-text-formatting" class="table-of-contents__link toc-highlight">Changing the Colour and Text Formatting</a></li><li><a href="#adding-data-to-the-command-prompt" class="table-of-contents__link toc-highlight">Adding Data to the Command Prompt</a></li></ul></li><li><a href="#a-shell-script-to-customise-the-prompt" class="table-of-contents__link toc-highlight">A Shell Script to Customise the Prompt</a></li><li><a href="#additional-prompt-configuration" class="table-of-contents__link toc-highlight">Additional Prompt Configuration</a></li><li><a href="#z-shell-and-oh-my-zsh" class="table-of-contents__link toc-highlight">Z-Shell and Oh-My-Zsh</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Effective Shell</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/donate">Donate</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/dwmkerr/effective-shell" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/dwmkerr" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Effective Shell v0.35.0. Copyright © 2025 Dave Kerr. Website built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e3898e66.js"></script>
<script src="/assets/js/main.ece95218.js"></script>
</body>
</html>