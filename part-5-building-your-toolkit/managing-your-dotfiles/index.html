<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HZFMZV9Z4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-8HZFMZV9Z4",{anonymize_ip:!0})</script><title data-react-helmet="true">Managing your Dotfiles | Effective Shell</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://effective-shell.com/part-5-building-your-toolkit/managing-your-dotfiles"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Managing your Dotfiles | Effective Shell"><meta data-react-helmet="true" name="description" content="As you build up more and more customisations for your shell and environment, it becomes important to find a way to manage these changes and files effectively."><meta data-react-helmet="true" property="og:description" content="As you build up more and more customisations for your shell and environment, it becomes important to find a way to manage these changes and files effectively."><link data-react-helmet="true" rel="icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://effective-shell.com/part-5-building-your-toolkit/managing-your-dotfiles"><link data-react-helmet="true" rel="alternate" href="https://effective-shell.com/part-5-building-your-toolkit/managing-your-dotfiles" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://effective-shell.com/part-5-building-your-toolkit/managing-your-dotfiles" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.078694be.css">
<link rel="preload" href="/assets/js/runtime~main.c1ec5efc.js" as="script">
<link rel="preload" href="/assets/js/main.5ddd716d.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Effective Shell Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.png" alt="Effective Shell Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Effective Shell</b></a><a class="navbar__item navbar__link navbar__link--active" href="/">Home</a></div><div class="navbar__items navbar__items--right"><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Effective Shell</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/part-1-transitioning-to-the-shell/">Transitioning to the Shell</a><button aria-label="Toggle the collapsible sidebar category &#x27;Transitioning to the Shell&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/part-2-core-skill/">Core Skills</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core Skills&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/part-3-manipulating-text/">Manipulating Text and Streams</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manipulating Text and Streams&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/part-4-shell-scripting/">Shell Scripting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Shell Scripting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_VCh3" aria-current="page" href="/part-5-building-your-toolkit/">Building Your Toolkit</a><button aria-label="Toggle the collapsible sidebar category &#x27;Building Your Toolkit&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/configuring-the-shell">Configuring the Shell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/customising-your-command-prompt">Customising Your Command Prompt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/part-5-building-your-toolkit/managing-your-dotfiles">Managing your Dotfiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/controlling-changes-with-git">Controlling Changes with Git</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/part-5-building-your-toolkit/managing-rempte-git-repositories/">Managing Remote Git Repositories and Sharing Your Dotfiles</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/part-6-advanced-techniques/">Advanced Techniques</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced Techniques&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Managing your Dotfiles</h1></header><p>As you build up more and more customisations for your shell and environment, it becomes important to find a way to manage these changes and files effectively.</p><p>Configuration files are often called &#x27;dotfiles&#x27;. In this chapter we&#x27;ll see how to manage your configuration - and &#x27;dotfiles&#x27; - in a way that allows you to easily manage changes over time and build up a library of scripts and features for your preferred shell. We&#x27;ll also look at how we can use your &#x27;dotfiles&#x27; across different shells.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Z-Shell</h5></div><div class="admonition-content"><p>We will start by discussing Bash configuration in this chapter. However, we&#x27;ll quickly switch to creating configuration that works across many shells - including Z-Shell! So if you are a Z-Shell user don&#x27;t worry, all of this material will be applicable to your environment as well.</p></div></div><p>In this chapter we will be creating some files and folders, if you just want to see the results, install the samples. You can then find them in the <em>~/effective-shell/dotfiles</em> folder.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Downloading the Samples</h5></div><div class="admonition-content"><p>Run the following command in your shell to download the samples:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> effective.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="dotfiles">Dotfiles<a class="hash-link" href="#dotfiles" title="Direct link to heading">â€‹</a></h2><p>Any file or folder on your system that starts with a <code>.</code> dot symbol is a &#x27;dotfile&#x27;. On many systems dotfiles are hidden by default. This means that they will not show up if you run commands like <code>ls</code>, unless you provide flags such as <code>-a</code> (<em>show all files and folders</em>) flag. In desktop environments such as Gnome, KDE and MacOS X dotfiles are also hidden by default.</p><p>Dotfiles are often used &#x27;behind the scenes&#x27; as configuration files or system files. This is why they are hidden by default - &#x27;normal&#x27; users shouldn&#x27;t have to worry about them or their contents.</p><p>You will mostly see dotfiles in your <code>HOME</code> directory. They have a dot to mark them as hidden to distinguish them from your personal files and folders. When there are configuration files that are <em>outside</em> your home directory, the dot is normally not used, because it is clear from the folder that the file is in that the file is in that it is a configuration file.</p><p>As an example, a user&#x27;s personal Bash configuration is stored in <em>~/.bashrc</em>, but the global Bash configuration applied to <em>all</em> users is stored in <em>/etc/bash.bashrc</em>. The second configuration file does not need a dot in front of it - the <em>/etc</em> folder is where configuration is kept so there is no need to differentiate it from other files like a user&#x27;s personal files.</p><p>Nowadays, when a user say &quot;my dotfiles&quot;, they typically mean their <em>configuration</em> files that are kept in their home directory. In a sense, your dotfiles are a bit like your personal settings for your computer. On a desktop environment your settings might be things like your theme or wallpaper. For a shell user, you settings will be files like <em>~/.bashrc</em> for your shell configuration, <em>~/.ssh/config</em> for your SSH configuration and so on.</p><p>You will likely change the dotfiles over time to suit your preferences. Let&#x27;s take a look at some sensible ways to organise and structure your dotfiles so that you can easily see what is your personal configuration, rather than what is the default configuration provided by the system, and easily manage these configurations.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="the-default-shell-dotfile">The Default Shell Dotfile<a class="hash-link" href="#the-default-shell-dotfile" title="Direct link to heading">â€‹</a></h2><p>On many platforms the default <em>~/.bashrc</em> file will contain a number of customisations out-of-the-box.</p><p>Let&#x27;s take a look at the <em>~/.bashrc</em> file that comes with Ubuntu 20 as an example. We&#x27;ll take a look at a few snippets. If you look at your own machine&#x27;s <em>~/.bashrc</em> file the contents may be different as it will vary from distribution to distribution:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># don&#x27;t put duplicate lines or lines starting with space in the history.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># See bash(1) for more options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable environment constant" style="color:#36acaa">HISTCONTROL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ignoreboth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># append to the history file, don&#x27;t overwrite it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">shopt</span><span class="token plain"> -s histappend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># for setting history length see HISTSIZE and HISTFILESIZE in bash(1)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable environment constant" style="color:#36acaa">HISTSIZE</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable environment constant" style="color:#36acaa">HISTFILESIZE</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2000</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Here we have a number of options that relate to the shell history - making it slightly larger than the default, appending to the history file rather than over-writing it and so on.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># If set, the pattern &quot;**&quot; used in a pathname expansion context will</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># match all files and zero or more directories and subdirectories.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#shopt -s globstar</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The <code>shopt -s globstar</code> command has been commented out, so that users can quickly remove the comment symbol to enable pathname expansion across subdirectories.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># set a fancy prompt (non-color, unless we know we &quot;want&quot; color)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string environment constant" style="color:#36acaa">$TERM</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    xterm-color</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">*-256color</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">color_prompt</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">yes</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">esac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># uncomment for a colored prompt, if the terminal has the capability; turned</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># off by default to not distract the user: the focus in a terminal window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># should be on the output of commands, not on the prompt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#force_color_prompt=yes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -n </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$force_color_prompt</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -x /usr/bin/tput </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> tput setaf </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&amp;</span><span class="token plain">/dev/null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># We have color support; assume it&#x27;s compliant with Ecma-48</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># (ISO/IEC-6429). (Lack of such support is extremely rare, and such</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># a case would tend to support setf rather than setaf.)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">color_prompt</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">color_prompt</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$color_prompt</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">yes</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable environment constant" style="color:#36acaa">PS1</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;</span><span class="token string variable" style="color:#36acaa">${debian_chroot</span><span class="token string variable operator" style="color:#393A34">:+</span><span class="token string variable" style="color:#36acaa">($debian_chroot)}</span><span class="token string" style="color:#e3116c">\[</span><span class="token string entity" style="color:#36acaa">\033</span><span class="token string" style="color:#e3116c">[01;32m\]\u@\h\[</span><span class="token string entity" style="color:#36acaa">\033</span><span class="token string" style="color:#e3116c">[00m\]:\[</span><span class="token string entity" style="color:#36acaa">\033</span><span class="token string" style="color:#e3116c">[01;34m\]\w\[</span><span class="token string entity" style="color:#36acaa">\033</span><span class="token string" style="color:#e3116c">[00m\]\$ &#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable environment constant" style="color:#36acaa">PS1</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;</span><span class="token string variable" style="color:#36acaa">${debian_chroot</span><span class="token string variable operator" style="color:#393A34">:+</span><span class="token string variable" style="color:#36acaa">($debian_chroot)}</span><span class="token string" style="color:#e3116c">\u@\h:\w\$ &#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">unset</span><span class="token plain"> color_prompt force_color_prompt</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This rather complex looking code determines whether the shell supports colour, and if so, updates the command prompt appropriately<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># enable color support of ls and also add handy aliases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -x /usr/bin/dircolors </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">test</span><span class="token plain"> -r ~/.dircolors </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">eval</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">dircolors</span><span class="token string variable" style="color:#36acaa"> -b ~/.dircolors</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token builtin class-name">eval</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">dircolors</span><span class="token string variable" style="color:#36acaa"> -b</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ls</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ls --color=auto&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#alias dir=&#x27;dir --color=auto&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">#alias vdir=&#x27;vdir --color=auto&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">grep</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;grep --color=auto&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">fgrep</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;fgrep --color=auto&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">egrep</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;egrep --color=auto&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>If the shell supports colour, then <em>aliases</em> are used so that common commands like <code>ls</code> will show their output in colour.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># some more ls aliases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ll</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ls -alF&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">la</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ls -A&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">l</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ls -CF&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Add an &quot;alert&quot; alias for long running commands.  Use like so:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   sleep 10; alert</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">alert</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;notify-send --urgency=low -i &quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable punctuation" style="color:#393A34">[</span><span class="token string variable" style="color:#36acaa"> $? </span><span class="token string variable operator" style="color:#393A34">=</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable number" style="color:#36acaa">0</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable punctuation" style="color:#393A34">]</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable operator" style="color:#393A34">&amp;&amp;</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable builtin class-name" style="color:#36acaa">echo</span><span class="token string variable" style="color:#36acaa"> terminal </span><span class="token string variable operator" style="color:#393A34">||</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable builtin class-name" style="color:#36acaa">echo</span><span class="token string variable" style="color:#36acaa"> error</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot; &quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">history</span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable function" style="color:#d73a49">tail</span><span class="token string variable" style="color:#36acaa"> -n1</span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable function" style="color:#d73a49">sed</span><span class="token string variable" style="color:#36acaa"> -e </span><span class="token string variable string" style="color:#e3116c">&#x27;\&#x27;&#x27;</span><span class="token string variable" style="color:#36acaa">s/^</span><span class="token string variable punctuation" style="color:#393A34">\</span><span class="token string variable" style="color:#36acaa">s*</span><span class="token string variable punctuation" style="color:#393A34">[</span><span class="token string variable number" style="color:#36acaa">0</span><span class="token string variable" style="color:#36acaa">-9</span><span class="token string variable punctuation" style="color:#393A34">]</span><span class="token string variable punctuation" style="color:#393A34">\</span><span class="token string variable" style="color:#36acaa">+</span><span class="token string variable punctuation" style="color:#393A34">\</span><span class="token string variable" style="color:#36acaa">s*//</span><span class="token string variable punctuation" style="color:#393A34">;</span><span class="token string variable" style="color:#36acaa">s/</span><span class="token string variable punctuation" style="color:#393A34">[</span><span class="token string variable punctuation" style="color:#393A34">;</span><span class="token string variable operator" style="color:#393A34">&amp;</span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable punctuation" style="color:#393A34">]</span><span class="token string variable punctuation" style="color:#393A34">\</span><span class="token string variable" style="color:#36acaa">s*alert$//</span><span class="token string variable string" style="color:#e3116c">&#x27;\&#x27;&#x27;</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Alias definitions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># You may want to put all your additions into a separate file like</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ~/.bash_aliases, instead of adding them here directly.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># See /usr/share/doc/bash-doc/examples in the bash-doc package.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -f ~/.bash_aliases </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">.</span><span class="token plain"> ~/.bash_aliases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>More aliases are added as shortcuts for useful commands. We also are sourcing the <em>~/.bash_aliases</em> file if it exists.</p><p>There will likely be a number of other configuration commands that are set in the file, such as setting up the &#x27;auto-completion&#x27; feature of Bash.</p><p>We could add our own customisations to this file, and many people will do so. However it might be better to keep our changes in our own configuration file. This allows us to differentiate between the &#x27;out-of-the-box&#x27; configuration and our own personal changes. Let&#x27;s see how to do that.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="creating-a-dotfiles-folder">Creating a Dotfiles Folder<a class="hash-link" href="#creating-a-dotfiles-folder" title="Direct link to heading">â€‹</a></h2><p>If we keep our shell customisations in our own dotfile, then it is much easier for us to see what are our personal configuration settings rather than the system-provided configuration settings. Also, if we keep these settings in a separate file, it becomes easier to then share this file across different machines. All we need to do is copy it to each machine where we want it, and <code>source</code> it from the <em>~/.bashrc</em> file.</p><p>The other great thing about keeping your shell configuration in its own file is that you can then use it for <em>different</em> shells if you want to. Or you can check in the file to see what the type of shell is and then load a configuration specifically for that shell.</p><p>It is entirely possible (and quite likely) that you will over time build up a collection of many dotfiles - some might be used for the shell, such as a file to set your favourite aliases or functions and some may be for other tools.</p><p>To keep things organised I&#x27;m going to show a technique to manage your dotfiles that I have found useful. You will see this technique, and many similar techniques, used by many people and demonstrated in blogs and so on. As I walk through the process feel free to customise or adapt it to suit your preferences!</p><p>First, let&#x27;s start by creating a sensible location for all of our per-user personal configuration files, a folder called <em>~/dotfiles</em>:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> ~/dotfiles</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Keeping our dotfiles in a single folder will make it easier for us to later on package them up and share them, track changes to them, update them, and so on.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="creating-a-shell-dotfile">Creating a Shell Dotfile<a class="hash-link" href="#creating-a-shell-dotfile" title="Direct link to heading">â€‹</a></h2><p>Rather than changing the system-provided <em>~/.bashrc</em> file to contain all of our customisations, let&#x27;s create our own shell configuration file in the dotfiles folder:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> ~/dotfiles/shell.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You can call this file whatever you like, it really comes down to preferences. But here are a few points about the name I have suggested:</p><ul><li>I have not put a dot in front of the name! This is because <em>within</em> the <em>~/dotfiles</em> folder I don&#x27;t actually want this file to be hidden - if I am looking in the <em>~/dotfiles</em> folder I want to see this file</li><li>I have not used the <em>name</em> of a shell program in this file - this is because I will make this file work with <em>any</em> shell that I regularly use - so whether I am using <code>zsh</code>, <code>bash</code> or <code>sh</code>, this file should still be able to be loaded</li><li>I have put <em>.sh</em> at the end of the file name - this is not really needed or even common in the world of Linux or Unix, but does make it immediately clear to the reader (or any program that opens the file) that it is a shell script</li></ul><p>Now let&#x27;s edit the <em>~/dotfiles/shell.sh</em> file to add some configuration that might be useful for our shell:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Note: there is no shebang in this script. This script sets my preferred shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># configuration and should be able to be sourced from any Bash-like shell or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># from Z shell.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># If we are not running interactively do not continue loading this file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> $- </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *i*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      *</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin class-name">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">esac</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>We&#x27;ll start the file with a comment that clearly explains why this file does not have a <em>shebang</em> and that it should be able to be sourced from any Bash-like shell or Z-Shell. Then we perform a quick check on the parameters that the shell was started with (which are available in the special <code>$-</code> parameter) to see if the <code>i</code> (<em>interactive</em>) parameter is set. If the interactive parameter is <em>not</em> set then we call <code>return</code> to stop loading the script.</p><p>This is standard for shell configuration files - we only change shell configuration when running interactively (otherwise things like aliases that we add could cause shell scripts and other processes that run non-interactively to have unexpected behaviour).</p><p>Next, let&#x27;s set our preferred editor:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Set our editor. Some tools use &#x27;VISUAL&#x27;, some use &#x27;EDITOR&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">VISUAL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">nano</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">EDITOR</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">nano</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>There are two variables are are used by the shell and command line programs to run an editor. The first, and original, variable was <code>EDITOR</code>. This was originally often a <em>line mode</em> editor - i.e. a text editor that doesn&#x27;t take up the whole screen. This was useful in the days of printed output, before screens were used. The <code>VISUAL</code> variable was used to specify the editor that could be used for &#x27;full screen&#x27; terminal editing. Some programs use <code>EDITOR</code> and some use <code>VISUAL</code> so it is best to set both.</p><p>I have used the <code>nano</code> editor in this example as it available on many distributions and is a little easier than <code>vi</code> or <code>emacs</code>, but you can use whatever you like. For my personal dotfiles I use <code>vi</code>.</p><p>At this stage you can start to go a bit over the top - for example here&#x27;s an alternative way to set the editor:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Set our preferred editor to the first available editor in the array below.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">preferred_editors</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nano </span><span class="token function" style="color:#d73a49">vi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:#36acaa">editor</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${preferred_editors</span><span class="token variable punctuation" style="color:#393A34">[</span><span class="token variable" style="color:#36acaa">@</span><span class="token variable punctuation" style="color:#393A34">]</span><span class="token variable" style="color:#36acaa">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin class-name">command</span><span class="token plain"> -v </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${editor}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/dev/null </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Note that &#x27;VISUAL&#x27; can be a full screen terminal editor. On legacy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># systems &#x27;EDITOR&#x27; was normally a line mode editor but there is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># generally no need to differentiate any more.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token assign-left variable" style="color:#36acaa">VISUAL</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable builtin class-name" style="color:#36acaa">command</span><span class="token string variable" style="color:#36acaa"> -v $</span><span class="token string variable punctuation" style="color:#393A34">{</span><span class="token string variable" style="color:#36acaa">editor</span><span class="token string variable punctuation" style="color:#393A34">}</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token assign-left variable" style="color:#36acaa">EDITOR</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${VISUAL}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin class-name">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">unset</span><span class="token plain"> editor preferred_editors</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In this method we specify an array of editors, go through each one, check to see if it exists<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>, and if it does set it, otherwise we look for the next in the list. This is completely over the top and unnecessary! But the great thing about your dotfiles is - they&#x27;re yours! If you want to do this, that&#x27;s absolutely fine. If you want to check to see if Sublime Text is installed and use that, or Visual Studio Code, then that&#x27;s not a problem - it&#x27;s your personal configuration so do what works for you!</p><p>You&#x27;ll notice that in the <em>~/effective-shell/dotfiles/shell.sh</em> folder I <code>unset</code> every shell variable after I use it. This is just to clean up after myself and try to leave the environment as pristine as possible after sourcing the file.</p><p>Another useful option to set is <code>stty -ixon</code>:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Allow us to use Ctrl+S to perform forward search, by disabling the start and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># stop output control signals, which are not needed on modern systems.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stty -ixon</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This command tells the terminal driver that we don&#x27;t need to control transmission with the Ctrl+Q and Ctrl+S commands, meaning we can instead use Ctrl+S to perform a forward search.</p><p>Now let&#x27;s set some sensible settings for working with folders:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Set a shell option but don&#x27;t fail if it doesn&#x27;t exist!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">safe_set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token builtin class-name">shopt</span><span class="token plain"> -s </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$1</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/dev/null </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set some options to make working with folders a little easier. Note that we</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># send all output to &#x27;/dev/null&#x27; as startup files should not write to the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># terminal and older shells might not have these options.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">safe_set autocd         </span><span class="token comment" style="color:#999988;font-style:italic"># Enter a folder name to &#x27;cd&#x27; to it.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">safe_set cdspell        </span><span class="token comment" style="color:#999988;font-style:italic"># Fix minor spelling issues with &#x27;cd&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">safe_set dirspell       </span><span class="token comment" style="color:#999988;font-style:italic"># Fix minor spelling issues for commands.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">safe_set cdable_vars    </span><span class="token comment" style="color:#999988;font-style:italic"># Allow &#x27;cd varname&#x27; to switch directory.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Uncomment the below if you want to be able to &#x27;cd&#x27; into directories that are</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># not just relative to the current location. For example, if the below was</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># uncommented we could &#x27;cd my_project&#x27; from anywhere if &#x27;my_project&#x27; is in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># the &#x27;repos&#x27; folder.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># CDPATH=&quot;~:~/repos&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>If we run this script on an older shell, some of these options might not be present. This is why we have created a <code>safe_set</code> function that won&#x27;t fail if the <code>shopt</code> function fails and will pipe any output to <em>/dev/null</em>. You can use these settings or remove them, it&#x27;s really up to you. Each one is described below:</p><table><thead><tr><th>Setting</th><th>Description</th></tr></thead><tbody><tr><td><code>autocd</code></td><td>Allows you to simply type a directory name or path and press enter to <code>cd</code> to it.</td></tr><tr><td><code>cdspell</code></td><td>When running commands like <code>cd dirname</code>, have the shell fix minor typos.</td></tr><tr><td><code>dirspell</code></td><td>When running commands like <code>cat dirname/test</code>, have the shell fix minor typos.</td></tr><tr><td><code>cdable_vars</code></td><td>If you create a var like <code>repos=&quot;$HOME/repos</code>, then <code>cd repos</code> to move into it.</td></tr></tbody></table><p>I have also left a comment on how you can use the <code>CDPATH</code> shell variable to allow you to <code>cd</code> into relative folders outside of your current path. This option you should be a little careful with as it can be a bit misleading - but you might find it useful.</p><p>Finally, let&#x27;s set some common shell history options:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Configure the history to make it large and support multi-line commands.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">safe_set histappend                  </span><span class="token comment" style="color:#999988;font-style:italic"># Don&#x27;t overwrite the history file, append.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">safe_set cmdhist                     </span><span class="token comment" style="color:#999988;font-style:italic"># Multi-line commands are one entry only.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PROMPT_COMMAND</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;history -a&#x27;</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic"># Before we prompt, save the history.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable environment constant" style="color:#36acaa">HISTSIZE</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10000</span><span class="token plain">                       </span><span class="token comment" style="color:#999988;font-style:italic"># A large number of commands per session.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable environment constant" style="color:#36acaa">HISTFILESIZE</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100000</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic"># A huge number of commands in the file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># HISTCONTROL=&quot;ignorespace:ignoredup&quot; # Ignore starting with space or duplicates?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># export HISTIGNORE=&quot;ls:history&quot;     # Any commands we want to not record?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># HISTTIMEFORMAT=&#x27;%F %T &#x27;            # Do we want a timestamp for commands?</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>These shell options and variables can be used to fine-tune how the history works. Here&#x27;s a description of each one:</p><table><thead><tr><th>Setting</th><th>Description</th></tr></thead><tbody><tr><td><code>shopt -s histappend</code></td><td>When we write to the history file, append entries, don&#x27;t overwrite the old file.</td></tr><tr><td><code>shopt -s cmdhist</code></td><td>If we have a multi-line command, record it as one entry, not one per line.</td></tr><tr><td><code>PROMPT_COMMAND</code></td><td>Before we show the <code>PS1</code> prompt, update the history file.</td></tr><tr><td><code>HISTSIZE</code></td><td>Store up to 10000 items in the history for the current session.</td></tr><tr><td><code>HISTFILESIZE</code></td><td>Store up to 100000 items in the history file for all sessions.</td></tr><tr><td><code>HISTCONTROL</code></td><td>Uncomment to ignore commands that start with a space, or ignore duplicated commands.</td></tr><tr><td><code>HISTIGNORE</code></td><td>Uncomment to not record certain commands in the history.</td></tr><tr><td><code>HISTTIMEFORMAT</code></td><td>Uncomment to keep a date and time next to each command in the history file.</td></tr></tbody></table><p>At this stage we got a sensible set of basic options for our shell, that should work in Bash, or Bash-like shells, as well as Z-Shell.</p><p>Now let&#x27;s look at how we could test this file, before we actually source it.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="testing-the-shell-dotfile">Testing the Shell Dotfile<a class="hash-link" href="#testing-the-shell-dotfile" title="Direct link to heading">â€‹</a></h2><p>Before we <code>source</code> the shell dotfile during shell startup, we should test that it runs without errors. Fortunately, there&#x27;s a really easy way to do this!</p><p>From your shell, just run the command below:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ sh -iex ~/dotfiles/shell.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ case $- in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ EDITOR=vi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ VISUAL=vi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ safe_set autocd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+ shopt -s autocd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>What we have done is run a shell program, in this case the <code>sh</code> program, and passed the following flags:</p><ul><li><code>i</code> - this makes the shell interactive - our script only runs in interactive shells so we need this to test it!</li><li><code>e</code> - this causes the shell to exit if a command fails</li><li><code>x</code> - this sets the tracing output</li></ul><p>By running this script in a shell this way we can see <em>exactly</em> what is being run, and if there is an error we will see the tracing stop at the point that the error occurs. You could perform exactly the same test with other shells, such as <code>bash</code> or <code>zsh</code>.</p><p>This is a great way to verify that the script works as expected, before we actually commit to sourcing it as part of our shell start up.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="sourcing-the-shell-dotfile">Sourcing the Shell Dotfile<a class="hash-link" href="#sourcing-the-shell-dotfile" title="Direct link to heading">â€‹</a></h2><p>Now that we have a working shell dotfile, we can source it as part of our shell startup.</p><p>Rather than having our shell startup file know about our <em>~/dotfiles</em> folder, we will create a symlink to th shell script from our home directory:</p><p>Finally, we can create a symlink in our home directory that points to our <em>~/dotfiles/shell.sh</em> file and we are good to go!</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ ln -sf &quot;$HOME/dotfiles/shell.sh&quot; &quot;$HOME/.shell.sh&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Note that in this example we used the <code>ln -sf</code> command to create a symlink, the <code>-s</code> flag ensures we create a normal symlink (rather than a &#x27;hard&#x27; link) and the <code>-f</code> flag forces the creation of the link by overwriting any link that already exists.</p><p>Now all we need to do is add the following lines to our <em>~/.bashrc</em> (or for Z-Shell, <em>~/.zshrc</em> file):</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Source our shell configuration if it exists.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -r ~/.shell.sh </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">source</span><span class="token plain"> ~/.shell.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This command uses the <code>-r</code> (<em>does file exist and is it readable</em>) test to check whether we have a <em>~/.shell.sh</em> file and if it exists, sources it.</p><p>We&#x27;re going to make a couple more changes and then bring this all together by creating one final script that sets performs the steps above for us. If this is enough dotfile configuration for you, then feel free to stop now, if you&#x27;d like to go deeper we&#x27;ll look at loading additional files.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="sourcing-files-from-a-folder">Sourcing Files from a Folder<a class="hash-link" href="#sourcing-files-from-a-folder" title="Direct link to heading">â€‹</a></h2><p>A common pattern with Linux and Unix systems is to allow <em>multiple</em> configuration files to be stored in a folder. A convention is to have a folder with the letters <code>.d</code> at the end, to differentiate between a single configuration file and a configuration folder.</p><p>This pattern became popular over the years as individual configuration files became larger and more complex, and operators wanted to be able to spread their configuration across multiple files.</p><p>Here are some common examples:</p><table><thead><tr><th>Configuration File</th><th>Configuration Directory</th><th>Notes</th></tr></thead><tbody><tr><td><code>/etc/crontab</code></td><td><code>/etc/cron.d</code></td><td>Configuration for scheduled tasks.</td></tr><tr><td><code>/etc/bash_completion</code></td><td><code>/etc/bash_completion.d</code></td><td>Configuration for Bash auto-complete.</td></tr><tr><td><code>/etc/sudoers</code></td><td><code>/etc/sudoers.d</code></td><td>Configuration for super-users.</td></tr></tbody></table><p>We can follow exactly the same pattern for our shell configuration. Let&#x27;s say for example that we want to customise our command prompt when we start the shell, we could put the file that contains the definition of the <code>set_ps1</code> function from the last chapter in our configuration folder. The file will be loaded and then we can use it to set the <code>PS1</code> variable in our shell configuration.</p><p>First, let&#x27;s make a directory to hold our shell configuration files:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir ~/dotfiles/shell.d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Now let&#x27;s copy over our <em>~/effective-shell/scripts/set_ps1.sh</em> file:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ cp ~/effective-shell/scripts/set_ps1.sh ~/dotfiles/shell.d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Now let&#x27;s update our <code>shell.sh</code> file to source all of the files in the <em>~/.shell.d</em> folder:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># If we are not running interactively do not continue loading this file.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> $- </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *i*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      *</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin class-name">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">esac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Source any files in our ~/.shell.d folder.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -x ~/.shell.d </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:#36acaa">shellfile</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> ~/.shell.d/*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -r </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$shellfile</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">source</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$shellfile</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">unset</span><span class="token plain"> shellfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The new code goes after the test to see whether the shell is interactive. We check to see whether there is a directory that can be searched (using the <code>-x</code> test), and then we loop through each file in the directory. If the file can be read (using the <code>-r</code> test) then we source it.</p><p>At the end of the <em>shell.sh</em> file we can now call the <code>set_ps1</code> function to set our theme:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Set the theme. Do not fail if the function doesn&#x27;t exist.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set_ps1 </span><span class="token string" style="color:#e3116c">&quot;debian&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Finally, let&#x27;s create a symlink in our home directory for the shell configuration files:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ ln -sf &quot;$HOME/dotfiles/shell.d&quot; &quot;$HOME/.shell.d&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>At this stage we&#x27;ve now successfully created a <em>dotfiles</em> folder to store our configuration, symlinks in our <code>$HOME</code> directory that point to our dotfiles and we have also updated our <em>~/.bashrc</em> or <em>~/.zshrc</em> to load our shell configuration.</p><p>If you want to see the new links you&#x27;ve created you can run the <code>ls</code> command just like so (I&#x27;ve abbreviated the output to make it more readable):</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ ls -al ~ | grep shell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lrwxr-xr-x    dwmkerr  .shell.d -&gt; /home/dwmkerr/dotfiles/shell.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lrwxr-xr-x    dwmkerr  .shell.sh -&gt; /home/dwmkerr/dotfiles/shell.sh</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="a-dotfile-install-script">A Dotfile Install Script<a class="hash-link" href="#a-dotfile-install-script" title="Direct link to heading">â€‹</a></h2><p>The manual steps we performed to setup the links for our dotfiles can be easily run using a shell script. </p><p>The script below shows how we can easily setup the links to the dotfiles, and source the appropriate files from our shell configuration:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/usr/bin/env sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># This script installs the dotfiles locally. Note that it should be run from the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># dotfiles folder so that the links are set properly!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create links for the shell configuration.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -sf </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/shell.sh&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string environment constant" style="color:#36acaa">$HOME</span><span class="token string" style="color:#e3116c">/.shell.sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -sf </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string environment constant" style="color:#36acaa">$PWD</span><span class="token string" style="color:#e3116c">/shell.d&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string environment constant" style="color:#36acaa">$HOME</span><span class="token string" style="color:#e3116c">/.shell.d&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Source our shell configuration in any local shell config files.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">config_files</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">~/.bashrc ~/.zshrc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:#36acaa">config_file</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${config_files</span><span class="token variable punctuation" style="color:#393A34">[</span><span class="token variable" style="color:#36acaa">@</span><span class="token variable punctuation" style="color:#393A34">]</span><span class="token variable" style="color:#36acaa">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Skip config files that don&#x27;t exist.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -r </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${config_file}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token builtin class-name">continue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># If we don&#x27;t have the &#x27;source ~/.shell.d&#x27; line in our config, add it.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">source_command</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;[ -r ~/.shell.sh ] &amp;&amp; source ~/.shell.sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> -q </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${source_command}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${config_file}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.shell.sh is not sourced in &#x27;</span><span class="token string variable" style="color:#36acaa">${config_file}</span><span class="token string" style="color:#e3116c">&#x27; adding this now...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${source_command}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${config_file}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This script creates the symlinks to our dotfiles and loops through a set of shell configuration files, adding a line to source the <em>~/.shell.sh</em> in the configuration file if it doesn&#x27;t exist.</p><p>Note how we use the <code>grep -q</code> command to search through the shell configuration file to see if the line that sources our dotfile exists. The <code>grep</code> command returns <code>0</code> if it finds a result and <code>1</code> otherwise, meaning we can easily use it in an &#x27;if&#x27; statement</p><p>This script can be run from the dotfiles folder like so:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ cd ~/dotfiles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ./install.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.shell.sh is not sourced in &#x27;/home/dwmkerr/.bashrc&#x27; adding this now...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>And that is it - we now have a <em>~/dotfiles</em> folder with our configuration, a sensible set of options for the shell, and the ability to quickly configure our dotfiles for different shells.</p><p>The dotfiles that we have a created are available in the <em>~/effective-shell/dotfiles</em> folder from the samples. The install script shown above is also in that folder.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">â€‹</a></h2><p>In this chapter we looked at some sensible configuration settings for shells. We also looked at how to keep our settings separated from the system provided configuration file. We also saw how to manage our configuration files and folders in a &#x27;dotfiles&#x27; folder. Finally, we created a simple script to &#x27;install&#x27; our dotfiles for the local user.</p><p>In the next chapter we&#x27;ll introduce Git - a version control tool we can use to manage changes to files like the &#x27;dotfiles&#x27; easily over time. We can also use this tool to share our dotfiles across many machines.</p><div class="footnotes"><hr><ol><li id="fn-1">If you are curious, the <code>debian_chroot</code> variable is set when you are running as a user that has run the <code>chroot</code> (<em>change root</em>) command. The <code>chroot</code> command allows you to create an isolated file system tree. This lets you run programs in what is sometimes called a &#x27;jail&#x27;, which is a little like a container. <code>chroot</code> is an advanced topic and out of the scope of this book, but the <code>debian_chroot</code> command in the <code>PS1</code> variable is used to help make it clear when running a shell if you are in a &#x27;changed root&#x27; environment.<a href="#fnref-1" class="footnote-backref">â†©</a></li><li id="fn-2">For a reminder on how to check whether a command is available, see <em>Checking for Installed Programs</em> in <a href="/part-4-shell-scripting/useful-patterns-for-shell-scripts">Chapter 23 - Useful Patterns for Shell Scripts</a>.<a href="#fnref-2" class="footnote-backref">â†©</a></li></ol></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/dwmkerr/dwmkerr/main/docs/05-building-your-toolkit/26-managing-your-dotfiles/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/part-5-building-your-toolkit/customising-your-command-prompt"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Customising Your Command Prompt</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/part-5-building-your-toolkit/controlling-changes-with-git"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Controlling Changes with Git</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#dotfiles" class="table-of-contents__link toc-highlight">Dotfiles</a></li><li><a href="#the-default-shell-dotfile" class="table-of-contents__link toc-highlight">The Default Shell Dotfile</a></li><li><a href="#creating-a-dotfiles-folder" class="table-of-contents__link toc-highlight">Creating a Dotfiles Folder</a></li><li><a href="#creating-a-shell-dotfile" class="table-of-contents__link toc-highlight">Creating a Shell Dotfile</a></li><li><a href="#testing-the-shell-dotfile" class="table-of-contents__link toc-highlight">Testing the Shell Dotfile</a></li><li><a href="#sourcing-the-shell-dotfile" class="table-of-contents__link toc-highlight">Sourcing the Shell Dotfile</a></li><li><a href="#sourcing-files-from-a-folder" class="table-of-contents__link toc-highlight">Sourcing Files from a Folder</a></li><li><a href="#a-dotfile-install-script" class="table-of-contents__link toc-highlight">A Dotfile Install Script</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Effective Shell</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/effective-shell" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/dwmkerr" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Dave Kerr. Website built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c1ec5efc.js"></script>
<script src="/assets/js/main.5ddd716d.js"></script>
</body>
</html>